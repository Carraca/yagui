!function(){var t,i,e;return function(o){function n(t,i){return _.call(t,i)}function s(t,i){var e,o,n,s,a,r,d,h,u,l,c,m=i&&i.split("/"),p=v.map,g=p&&p["*"]||{};if(t&&"."===t.charAt(0))if(i){for(m=m.slice(0,m.length-1),t=t.split("/"),a=t.length-1,v.nodeIdCompat&&x.test(t[a])&&(t[a]=t[a].replace(x,"")),t=m.concat(t),u=0;u<t.length;u+=1)if(c=t[u],"."===c)t.splice(u,1),u-=1;else if(".."===c){if(1===u&&(".."===t[2]||".."===t[0]))break;u>0&&(t.splice(u-1,2),u-=2)}t=t.join("/")}else 0===t.indexOf("./")&&(t=t.substring(2));if((m||g)&&p){for(e=t.split("/"),u=e.length;u>0;u-=1){if(o=e.slice(0,u).join("/"),m)for(l=m.length;l>0;l-=1)if(n=p[m.slice(0,l).join("/")],n&&(n=n[o])){s=n,r=u;break}if(s)break;!d&&g&&g[o]&&(d=g[o],h=u)}!s&&d&&(s=d,r=h),s&&(e.splice(0,r,s),t=e.join("/"))}return t}function a(t,i){return function(){return m.apply(o,w.call(arguments,0).concat([t,i]))}}function r(t){return function(i){return s(i,t)}}function d(t){return function(i){f[t]=i}}function h(t){if(n(b,t)){var i=b[t];delete b[t],C[t]=!0,c.apply(o,i)}if(!n(f,t)&&!n(C,t))throw new Error("No "+t);return f[t]}function u(t){var i,e=t?t.indexOf("!"):-1;return e>-1&&(i=t.substring(0,e),t=t.substring(e+1,t.length)),[i,t]}function l(t){return function(){return v&&v.config&&v.config[t]||{}}}var c,m,p,g,f={},b={},v={},C={},_=Object.prototype.hasOwnProperty,w=[].slice,x=/\.js$/;p=function(t,i){var e,o=u(t),n=o[0];return t=o[1],n&&(n=s(n,i),e=h(n)),n?t=e&&e.normalize?e.normalize(t,r(i)):s(t,i):(t=s(t,i),o=u(t),n=o[0],t=o[1],n&&(e=h(n))),{f:n?n+"!"+t:t,n:t,pr:n,p:e}},g={require:function(t){return a(t)},exports:function(t){var i=f[t];return"undefined"!=typeof i?i:f[t]={}},module:function(t){return{id:t,uri:"",exports:f[t],config:l(t)}}},c=function(t,i,e,s){var r,u,l,c,m,v,_=[],w=typeof e;if(s=s||t,"undefined"===w||"function"===w){for(i=!i.length&&e.length?["require","exports","module"]:i,m=0;m<i.length;m+=1)if(c=p(i[m],s),u=c.f,"require"===u)_[m]=g.require(t);else if("exports"===u)_[m]=g.exports(t),v=!0;else if("module"===u)r=_[m]=g.module(t);else if(n(f,u)||n(b,u)||n(C,u))_[m]=h(u);else{if(!c.p)throw new Error(t+" missing "+u);c.p.load(c.n,a(s,!0),d(u),{}),_[m]=f[u]}l=e?e.apply(f[t],_):void 0,t&&(r&&r.exports!==o&&r.exports!==f[t]?f[t]=r.exports:l===o&&v||(f[t]=l))}else t&&(f[t]=e)},t=i=m=function(t,i,e,n,s){if("string"==typeof t)return g[t]?g[t](i):h(p(t,i).f);if(!t.splice){if(v=t,v.deps&&m(v.deps,v.callback),!i)return;i.splice?(t=i,i=e,e=null):t=o}return i=i||function(){},"function"==typeof e&&(e=n,n=s),n?c(o,t,i,e):setTimeout(function(){c(o,t,i,e)},4),m},m.config=function(t){return m(t)},t._defined=f,e=function(t,i,e){i.splice||(e=i,i=[]),n(f,t)||n(b,t)||(b[t]=[t,i,e])},e.amd={jQuery:!0}}(),e("../tools/almond",function(){}),e("utils/GuiUtils",[],function(){var t={};return t.makeProxy=function(t,i,e){for(var o=t.prototype,n=i.prototype,s=Object.keys(o),a=0,r=s.length;r>a;++a){var d=s[a];n[d]||(n[d]=e?e(o[d]):o[d])}},t.rgbToHsv=function(t){var i=t[0],e=t[1],o=t[2],n=Math.max(i,e,o),s=Math.min(i,e,o);if(s===n)return[0,0,s];var a=i===s?e-o:o===s?i-e:o-i,r=i===s?3:o===s?1:5;return[(r-a/(n-s))/6,(n-s)/n,n]},t.hsvToRgb=function(t){var i=6*t[0],e=t[1],o=t[2],n=Math.floor(i),s=i-n,a=o*(1-e),r=o*(1-s*e),d=o*(1-(1-s)*e),h=n%6;return 0===h?[o,d,a]:1===h?[r,o,a]:2===h?[a,o,d]:3===h?[a,r,o]:4===h?[d,a,o]:[o,a,r]},t.getValidColor=function(t){for(var i=0,e=t.length;e>i;++i)t[i]=Math.max(0,Math.min(1,t[i]));return t},t.getStrColor=function(i){return 3===i.length?t.rgbToHex(i):"rgba("+Math.round(255*i[0])+","+Math.round(255*i[1])+","+Math.round(255*i[2])+","+i[3]+")"},t.getColorMult=function(i,e){var o=[i[0]*e,i[1]*e,i[2]*e];return 4===i.length&&o.push(i[3]),t.getValidColor(o)},t.getColorAdd=function(i,e){var o=[i[0]+e,i[1]+e,i[2]+e];return 4===i.length&&o.push(i[3]),t.getValidColor(o)},t.rgbToHex=function(t){for(var i="#",e=0;3>e;++e){var o=Math.round(255*t[e]).toString(16);i+=1===o.length?"0"+o:o}return i},t.hexToRgb=function(t){var i=0;"#"===t[0]&&(t=t.slice(1));var e=t;if(t.length>6)e=t.slice(0,6);else if(t.length<6)for(e="",i=0;3>i;++i)e+=t[i]?t[i]+t[i]:"00";var o=[0,0,0];for(i=0;3>i;++i){var n=parseInt(e[2*i]+e[2*i+1],16);o[i]=(n!==n?0:n)/255}return o},t}),e("widgets/BaseWidget",[],function(){var t=function(){};return t.prototype={_getInitialValue:function(t,i){return"string"!=typeof i?t:t[i]},_getCheckCallback:function(t,i){return"string"!=typeof i?i:function(e){t[i]=e}},_setDomContainer:function(t){this.domContainer=t},setCallback:function(t){this.callback=t},setVisibility:function(t){this.domContainer&&(this.domContainer.hidden=!t)}},t}),e("widgets/Button",["utils/GuiUtils","widgets/BaseWidget"],function(t,i){var e=function(t,i,e){var o=e?i[e].bind(i):i;this.domButton=document.createElement("button"),this.domButton.className="gui-button",this.domButton.innerHTML=t||"",this.domButton.addEventListener("click",this._onClick.bind(this)),this.setCallback(o)};return e.prototype={setEnable:function(t){this.domButton.disabled=void 0===t?!1:!t},_onClick:function(){this.callback&&this.callback()}},t.makeProxy(i,e),e}),e("widgets/Checkbox",["utils/GuiUtils","widgets/BaseWidget"],function(t,i){var e=function(t,i){var e=this._getInitialValue(t,i),o=this._getCheckCallback(t,i);this.domCheckbox=document.createElement("input"),this.domCheckbox.className="gui-input-checkbox",this.domCheckbox.type="checkbox",this.domLabelCheckbox=document.createElement("label"),this.setValue(void 0===e?!0:e),this.setCallback(o)};return e.prototype={_onMouseDown:function(){this.setValue(!this.domCheckbox.checked)},setValue:function(t,i){this.domCheckbox.checked=t,!i&&this.callback&&this.callback(t)},getValue:function(){return this.domCheckbox.checked}},t.makeProxy(i,e),e}),e("widgets/Color",["utils/GuiUtils","widgets/BaseWidget"],function(t,i){var e=["-moz-","-o-","-webkit-","-ms-",""],o='url("data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAgAAAAICAIAAABLbSncAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAChJREFUeNpiPHPmDAMMGBsbw9lMDDgA6RKM%2F%2F%2F%2Fh3POnj1LCzsAAgwAQtYIcFfEyzkAAAAASUVORK5CYII%3D")',n=function(i,e){var o=this._getInitialValue(i,e),n=this._getCheckCallback(i,e);o=o?t.getValidColor(o):[1,0,0],this.domColor=document.createElement("div"),this.domColor.className="gui-widget-color",this.domInputColor=document.createElement("input"),this.domPopup=document.createElement("div"),this.domHue=document.createElement("div"),this.domHue.className="gui-color-hue",this.domHueKnob=document.createElement("div"),this.domHueKnob.className="gui-knob-hue",this.domSaturation=document.createElement("div"),this.domSaturation.className="gui-color-saturation";var s=document.createElement("div");this.domSaturation.appendChild(s),this.domSaturationKnob=document.createElement("div"),this.domSaturationKnob.className="gui-knob-saturation",this.domHue.appendChild(this.domHueKnob),this.domPopup.appendChild(this.domSaturationKnob),this.domPopup.appendChild(this.domSaturation),this.domPopup.appendChild(this.domHue),this.domColor.appendChild(this.domInputColor),this.domColor.appendChild(this.domPopup),this._hueGradient(this.domHue),this._linearGradient(s,"top","rgba(0,0,0,0)","#000"),this.domColor.addEventListener("keydown",this._onInputDown.bind(this)),this.domSaturation.addEventListener("mousedown",this._onSaturationDown.bind(this)),this.domHue.addEventListener("mousedown",this._onHueDown.bind(this)),window.addEventListener("mouseup",this._onMouseUp.bind(this)),window.addEventListener("mouseout",this._onMouseUp.bind(this)),window.addEventListener("mousemove",this._onMouseMove.bind(this)),this.hasAlpha=4===o.length,this.alpha=1,this.hasAlpha&&(this.domPopup.style.width="142px",this.domAlpha=document.createElement("div"),this.domAlpha.className="gui-color-alpha",this.domAlphaKnob=document.createElement("div"),this.domAlphaKnob.className="gui-knob-alpha",this._alphaGradient(this.domAlpha,"top","rgba(0,0,0,1.0)","rgba(0,0,0,0.0)"),this.domAlpha.addEventListener("mousedown",this._onAlphaDown.bind(this)),this.domAlpha.appendChild(this.domAlphaKnob),this.domPopup.appendChild(this.domAlpha)),this.editHue=this.editSaturation=this.editAlpha=!1,this.widgetHeight=this.widgetWidth=100,this.setValue(o),this.setCallback(n)};return n.prototype={_onInputDown:function(i){i.stopPropagation(),13===i.keyCode&&this.setValue(t.hexToRgb(i.target.value))},_onUpdateSaturation:function(i){var e=this.domSaturation.getBoundingClientRect(),o=t.rgbToHsv(this.getValue());o[1]=Math.min(1,Math.max(0,(i.clientX-e.left)/e.width)),o[2]=Math.min(1,Math.max(0,1-(i.clientY-e.top)/e.width)),this.setValue(t.hsvToRgb(o),!1,!0),this._updateGui()},_onUpdateHue:function(i){var e=this.domHue.getBoundingClientRect(),o=t.rgbToHsv(this.getValue());o[0]=Math.min(1,Math.max(0,1-(i.clientY-e.top)/e.height)),this.setValue(t.hsvToRgb(o),!1,!0),this._updateGui()},_onUpdateAlpha:function(t){var i=this.domAlpha.getBoundingClientRect(),e=this.getValue();e[3]=this.alpha=Math.min(1,Math.max(0,1-(t.clientY-i.top)/i.height)),this.setValue(e,!1,!0),this._updateGui()},_updateGui:function(){var i=this.getValue(),e=t.rgbToHsv(i);this.domSaturationKnob.style.marginLeft=this.widgetWidth*e[1]-7+"px",this.domSaturationKnob.style.marginTop=this.widgetHeight*(1-e[2])-7+"px",e[1]=e[2]=1,this._linearGradient(this.domSaturation,"left","#fff",t.getStrColor(t.hsvToRgb(e))),this.domHueKnob.style.marginTop=(1-e[0])*this.widgetHeight+"px",this.hasAlpha&&void 0!==i[3]&&(this.domAlphaKnob.style.marginTop=(1-this.alpha)*this.widgetHeight+"px")},_onMouseMove:function(t){return this.editSaturation||this.editHue||this.editAlpha?this.editSaturation?this._onUpdateSaturation(t):this.editHue?this._onUpdateHue(t):this.editAlpha?this._onUpdateAlpha(t):void 0:void 0},_onSaturationDown:function(t){this.editSaturation=!0,this._onMouseMove(t)},_onHueDown:function(t){this.editHue=!0,this._onMouseMove(t)},_onAlphaDown:function(t){this.editAlpha=!0,this._onMouseMove(t)},_onMouseUp:function(){this.editHue=this.editSaturation=this.editAlpha=!1},_hueGradient:function(t){t.style.background="";for(var i=0,o=e.length;o>i;++i)t.style.cssText+="background: "+e[i]+"linear-gradient(top,  #ff0000 0%, #ff00ff 17%, #0000ff 34%, #00ffff 50%, #00ff00 67%, #ffff00 84%, #ff0000 100%);"},_alphaGradient:function(t,i,n,s){t.style.background="";for(var a=0,r=e.length;r>a;++a)t.style.cssText+="background: "+e[a]+"linear-gradient("+i+", "+n+","+s+"),"+o+";"},_linearGradient:function(t,i,o,n){t.style.background="";for(var s=0,a=e.length;a>s;++s)t.style.cssText+="background: "+e[s]+"linear-gradient("+i+", "+o+" 0%, "+n+" 100%);"},setValue:function(i,e,o){var n=t.rgbToHex(i);if(this.domInputColor.value=n,this.hasAlpha){i.length>=4?this.alpha=i[3]:i.push(this.alpha);var s="rgba("+parseInt(255*i[0],10)+","+parseInt(255*i[1],10)+","+parseInt(255*i[2],10)+","+this.alpha+")";this._alphaGradient(this.domInputColor,"0deg",s,s)}else this.domInputColor.style.background=n;var a=t.rgbToHsv(i);this.domSaturationKnob.style.borderColor=a[2]<.5||a[1]>.5?"#fff":"#000",this.domInputColor.style.color=this.alpha>.2&&(a[2]<.5||a[1]>.5)?"#fff":"#000",o||this._updateGui(),!e&&this.callback&&this.callback(i)},getValue:function(){var i=t.hexToRgb(this.domInputColor.value);return this.hasAlpha&&i.push(this.alpha),i}},t.makeProxy(i,n),n}),e("widgets/Combobox",["utils/GuiUtils","widgets/BaseWidget"],function(t,i){var e=function(t,i,e){var o=this._getInitialValue(t,i),n=this._getCheckCallback(t,i);e=e||{},o=o||e[0],this.domSelect=document.createElement("select"),this.domSelect.className="gui-select",this.addOptions(e),this.domSelect.addEventListener("change",this._onChange.bind(this)),this.setValue(o),this.setCallback(n)};return e.prototype={_onChange:function(t){this.setValue(t.target.value)},addOptions:function(t){for(var i=Object.keys(t),e=0;e<i.length;++e){var o=document.createElement("option");o.innerHTML=t[i[e]],o.value=i[e],this.domSelect.appendChild(o)}},setValue:function(t,i){this.domSelect.value=t,!i&&this.callback&&this.callback(t)},getValue:function(){return this.domSelect.value}},t.makeProxy(i,e),e}),e("widgets/Slider",["utils/GuiUtils","widgets/BaseWidget"],function(t,i){var e=function(t,i,e,o,n){var s=this._getInitialValue(t,i),a=this._getCheckCallback(t,i);s=void 0!==s?s:100,e=void 0!==e?e:0,o=void 0!==o?o:200,n=void 0!==n?n:1,this.domSlider=document.createElement("div"),this.domSlider.className="gui-slider",this.domSliderFill=document.createElement("div"),this.domSlider.appendChild(this.domSliderFill),this.domInputText=document.createElement("input"),this.domInputText.className="gui-input-number",this.domInputText.type="number",this.min=this.domInputText.min=e,this.max=this.domInputText.max=o,this.step=this.domInputText.step=n,this.domInputText.addEventListener("keydown",this._onKeyDown.bind(this)),this.domInputText.addEventListener("change",this._onInputText.bind(this)),this.domInputText.addEventListener("blur",this._onInputText.bind(this)),this.domSlider.addEventListener("mousedown",this._onMouseDown.bind(this)),window.addEventListener("mouseup",this._onMouseUp.bind(this),!0),window.addEventListener("mousemove",this._onMouseMove.bind(this)),this.lastValue=s,this.isDown=!1,this.setValue(s),this.setCallback(a)};return e.prototype={_onInputText:function(t){var i=parseFloat(t.target.value);i===i&&i!==this.lastValue&&this.setValue(i)},_onKeyDown:function(t){t.stopPropagation(),13===t.which&&this.domInputText.blur()},_onMouseMove:function(t){if(t.preventDefault(),this.isDown){var i=this.domSlider.getBoundingClientRect(),e=this.min+(this.max-this.min)*((t.clientX-i.left)/i.width);this.setValue(e)}},_onMouseDown:function(t){this.isDown=!0,this._onMouseMove(t)},_onMouseUp:function(){this.isDown=!1},_setDomContainer:function(t){this.domContainer=t},getValue:function(){return parseFloat(this.domInputText.value)},setValue:function(t,i){this.lastValue=t,t=Math.max(Math.min(t,this.max),this.min),t=Math.round(t/this.step)*this.step,this.domInputText.value=t;var e=this.min;this.max!==this.min&&(e=(t-this.min)/(this.max-this.min)),this.domSliderFill.style.width=100*e+"%",!i&&this.callback&&this.callback(t)},setMax:function(t){return this.domInputText.max=this.max=t,this},setMin:function(t){return this.min=t,this}},t.makeProxy(i,e),e}),e("widgets/Title",["utils/GuiUtils","widgets/BaseWidget"],function(t,i){var e=function(t){this.domText=document.createElement("div"),this.domText.innerHTML=t||"",this.domText.className="group-title"};return e.prototype={setText:function(t){this.domText.innerHTML=t},setVisibility:function(t){this.domText.hidden=!t}},t.makeProxy(i,e),e}),e("containers/BaseContainer",["widgets/BaseWidget","widgets/Button","widgets/Checkbox","widgets/Color","widgets/Combobox","widgets/Slider","widgets/Title"],function(t,i,e,o,n,s,a){var r=function(){};return r.prototype={_addLine:function(t){var i=document.createElement("li");return i.innerHTML=t||"",this.domUl.appendChild(i),i},_createLabel:function(t){var i=document.createElement("label");return i.className="gui-label-side",i.innerHTML=t||"",i},_setDomContainer:function(t){this.domContainer=t},addTitle:function(t){var i=new a(t);return this.domUl.appendChild(i.domText),i},addCheckbox:function(t,i,o){var n=new e(i,o),s=this._addLine();s.className+=" gui-pointerOnHover gui-glowOnHover";var a=this._createLabel(t);return a.style.overflow="visible",a.className+=" gui-pointerOnHover",s.appendChild(a),s.appendChild(n.domCheckbox),s.appendChild(n.domLabelCheckbox),s.addEventListener("mousedown",n._onMouseDown.bind(n)),n._setDomContainer(s),n},addCombobox:function(t,i,e,o){var s=new n(i,e,o),a=this._addLine();return t?a.appendChild(this._createLabel(t)):s.domSelect.style.width="100%",a.appendChild(s.domSelect),s._setDomContainer(a),s},addSlider:function(t,i,e,o,n,a){var r=new s(i,e,o,n,a),d=this._addLine();return t&&d.appendChild(this._createLabel(t)),d.appendChild(r.domInputText),d.appendChild(r.domSlider),r._setDomContainer(d),r},addColor:function(t,i,e){var n=new o(i,e),s=this._addLine();return t?s.appendChild(this._createLabel(t)):n.domColor.style.width="100%",s.appendChild(n.domColor),n._setDomContainer(s),n},addButton:function(t,e,o){var n=new i(t,e,o),s=this._addLine();return s.appendChild(n.domButton),n._setDomContainer(s),n},addDualButton:function(t,e,o,n,s,a){var r=new i(t,o,s),d=new i(e,n,a),h=this._addLine();h.appendChild(d.domButton),h.appendChild(r.domButton);var u=r.domButton.style,l=d.domButton.style;return u.width=l.width="49%",u.marginRight=l.marginLeft="1%",r._setDomContainer(h),d._setDomContainer(h),[r,d]},setVisibility:function(t){this.domContainer&&(this.domContainer.hidden=!t)}},r}),e("containers/Folder",["utils/GuiUtils","containers/BaseContainer"],function(t,i){var e=function(t){this.domUl=document.createElement("ul"),this.domUl.setAttribute("opened",!0);var i=document.createElement("label");i.innerHTML=t||"",i.addEventListener("mousedown",this._onMouseDown.bind(this)),this.domUl.appendChild(i),this.isOpen=!0};return e.prototype={_onMouseDown:function(){this.isOpen=!this.isOpen,this.domUl.setAttribute("opened",this.isOpen)},open:function(){this.isOpen=!0,this.domUl.setAttribute("opened",!0)},close:function(){this.isOpen=!1,this.domUl.setAttribute("opened",!1)},setVisibility:function(t){t||this.close(),this.domUl.style.height=t?"auto":"0px"}},t.makeProxy(i,e),e}),e("containers/Sidebar",["containers/Folder"],function(t){var i=function(t){this.domSidebar=document.createElement("div"),this.domSidebar.className="gui-sidebar",this.domResize=document.createElement("div"),this.domResize.className="gui-resize",this.isDragging=!1,this.mouseX=0,this.domResize.addEventListener("mousedown",this._onMouseDown.bind(this)),window.addEventListener("mousemove",this._onMouseMove.bind(this)),window.addEventListener("mouseup",this._onMouseUp.bind(this)),this.callbackResize=t,this.isOnTheRight=!1};return i.prototype={_setTop:function(t){this.domSidebar.style.top=this.domResize.style.top=t+"px"},_onTheRight:function(){this.isOnTheRight=!0,this.domSidebar.style.right=0,this.domSidebar.style.borderRight=0,this.domSidebar.style.borderLeft="double",this.domSidebar.style.borderColor="rgba(255,255,255,0.3)",this.domResize.style.left="auto",this.domResize.style.right=this.domSidebar.offsetWidth+"px",this.domResize.style.marginRight="-3px"},_onMouseDown:function(t){this.isDragging=!0,this.mouseX=t.clientX},_updateCanvasPosition:function(t){var i=this.domSidebar.hidden?0:this.domSidebar.offsetWidth;this.isOnTheRight?t.width-=i:(t.style.left=this.domSidebar.offsetLeft+i+"px",t.width-=i)},_onMouseMove:function(t){if(this.isDragging!==!1){var i=t.clientX,e=i-this.mouseX;this.isOnTheRight&&(e=-e);var o=Math.max(50,this.domSidebar.offsetWidth+e),n=o+"px";this.domSidebar.style.width=n,this.isOnTheRight?this.domResize.style.right=this.domSidebar.offsetWidth+"px":this.domResize.style.left=n,this.mouseX=i,this.callbackResize()}},_onMouseUp:function(){this.isDragging=!1},addMenu:function(i){var e=new t(i);return this.domSidebar.appendChild(e.domUl),e},setVisibility:function(t){this.domSidebar.hidden=!t,this.domResize.hidden=!t,this.callbackResize()}},i}),e("widgets/MenuButton",["utils/GuiUtils","widgets/BaseWidget"],function(t,i){var e=function(t,i,e){var o=t;o&&"function"!=typeof o?o=t[i].bind(t):e=i,this.domSpan=document.createElement("span"),this.domSpan.className="shortcut",this.domSpan.innerHTML=e||"",this.setCallback(o)};return e.prototype={_setDomContainer:function(t){this.domContainer=t,t.addEventListener("click",this._onClick.bind(this))},_onClick:function(){this.callback&&this.callback()}},t.makeProxy(i,e),e}),e("containers/Menu",["utils/GuiUtils","containers/BaseContainer","widgets/MenuButton"],function(t,i,e){var o=function(){this.domUl=document.createElement("ul")};return o.prototype={addButton:function(t,i,o,n){var s=new e(i,o,n),a=this._addLine(t);return a.appendChild(s.domSpan),s._setDomContainer(a),s},addSlider:function(t,e,o,n,s,a){var r=i.prototype.addSlider.call(this,t,e,o,n,s,a);return r.domInputText.style.width="18%",r.domSlider.style.width=t?"44%":"80%",r}},t.makeProxy(i,o),o}),e("utils/EditStyle",["utils/GuiUtils"],function(t){var i={};i.refRules={};var e,o=function(){if(e)return e;for(var t=document.styleSheets,i=0,o=t.length;o>i;++i){var n=t[i].href;if(n&&-1!==n.indexOf("yagui.css"))return e=t[i]}},n=function(t,e,n){var s=o();if(s){var a=s.cssRules||s.rules,r=i.refRules[t];if(!r){var d=0,h=a.length;for(d=0;h>d&&a[d].selectorText!==t;++d);if(d===h)return!1;r=i.refRules[t]=a[d]}r&&(r.style[e]=n)}};return i.changeWidgetsColor=function(e){var o=t.getStrColor(e);n(".gui-button","background",o),n(".gui-select","background",o),n(".gui-slider > div","background",o),i._curWidgetColor=e},i.changeDisplayBoorder=function(t){var e=t?"1px solid #000":"0";n(".gui-button","border",e),n(".gui-select","border",e),n(".gui-slider","border",e),n(".gui-input-number","border",e),n(".gui-sidebar > ul > label","borderTop",e),n(".gui-sidebar > ul > label","borderBottom",e),n(".gui-sidebar","borderLeft",e),n(".gui-sidebar","borderRight",e),n(".gui-topbar","borderBottom",e),i._curShowBorder=t},i.changeBackgroundColor=function(e){n(".gui-sidebar","background",t.getStrColor(e));var o=t.getStrColor(t.getColorMult(e,.5));n(".gui-topbar","background",o),n(".gui-topbar ul > li > ul","background",o),i._curBackgroundColor=e},i.changeTextColor=function(e){var o=t.getStrColor(e);n("*","color",o),n(".gui-sidebar > ul > label","color",o),i._curTextColor=e},i.changeOverallColor=function(e){i.changeWidgetsColor(e);var o=t.getColorMult(e,.5);o.length=3,i.changeBackgroundColor(o);for(var n=t.getColorAdd(e,.5),s=0;3>s;++s)n[s]=Math.min(.8,n[s]);i.changeTextColor(n),i._curWidgetColor=e,i._curBackgroundColor=o,i._curTextColor=n},i._curTextColor=[.73,.73,.73,1],i._curWidgetColor=[.32,.37,.39,1],i._curBackgroundColor=[.24,.24,.24],i._curShowBorder=!1,i.changeOverallColor([.3,.34,.4,1]),i}),e("containers/Topbar",["containers/Menu","utils/EditStyle"],function(t,i){var e=function(t){this.domTopbar=document.createElement("div"),this.domTopbar.className="gui-topbar",this.domUl=document.createElement("ul"),this.domTopbar.appendChild(this.domUl),this.callbackResize=t,this.uiExtra={}};return e.prototype={_updateCanvasPosition:function(t){var i=this.domTopbar.hidden?0:this.domTopbar.offsetHeight;t.style.top=i+"px",t.height-=i},_onChangeColor:function(t,e){t(e),this.uiExtra.overallColor.setValue(i._curWidgetColor,!0),this.uiExtra.widgetColor.setValue(i._curWidgetColor,!0),this.uiExtra.backColor.setValue(i._curBackgroundColor,!0),this.uiExtra.textColor.setValue(i._curTextColor,!0)},addMenu:function(i){var e=new t,o=document.createElement("li");return o.innerHTML=i||"",this.domUl.appendChild(o),o.appendChild(e.domUl),e._setDomContainer(o),e},addExtra:function(){var t=this._onChangeColor,e=this.addMenu("Extra UI"),o=this.uiExtra;return e.addTitle("Overall"),o.overallColor=e.addColor("",i._curWidgetColor,t.bind(this,i.changeOverallColor)),e.addTitle("Advanced"),o.widgetColor=e.addColor("Widget",i._curWidgetColor,t.bind(this,i.changeWidgetsColor)),o.backColor=e.addColor("Back",i._curBackgroundColor,t.bind(this,i.changeBackgroundColor)),o.textColor=e.addColor("Text",i._curTextColor,t.bind(this,i.changeTextColor)),o.showBorder=e.addCheckbox("Border",i._curShowBorder,i.changeDisplayBoorder),e},setVisibility:function(t){this.domTopbar.hidden=!t,this.callbackResize()}},e}),e("GuiMain",["containers/Sidebar","containers/Topbar"],function(t,i){var e=function(t,i){this.domMain=document.createElement("div"),this.domCanvas=t,this.callbackResize=i,this.domCanvas&&(this.domCanvas.width=window.innerWidth,this.domCanvas.height=window.innerHeight),this.cbResize_=this._onWindowResize.bind(this),document.body.appendChild(this.domMain),this.leftSidebar=void 0,this.rightSidebar=void 0,this.topbar=void 0,window.addEventListener("resize",this._onWindowResize.bind(this),!1)};return e.prototype={_onWindowResize:function(){this.domCanvas&&(this.domCanvas.width=window.innerWidth,this.domCanvas.height=window.innerHeight,this.domCanvas.left=0,this.domCanvas.top=0,this.leftSidebar&&this.leftSidebar._updateCanvasPosition(this.domCanvas),this.rightSidebar&&this.rightSidebar._updateCanvasPosition(this.domCanvas),this.topbar&&this.topbar._updateCanvasPosition(this.domCanvas)),this._updateSidebarsPosition(),this.callbackResize&&this.callbackResize()},_updateSidebarsPosition:function(){if(this.topbar){var t=this.topbar.domTopbar.offsetHeight;this.leftSidebar&&this.leftSidebar._setTop(t),this.rightSidebar&&this.rightSidebar._setTop(t)}},addLeftSidebar:function(){this.leftSidebar=new t(this.cbResize_);var i=this.leftSidebar.domSidebar;return this.domMain.appendChild(i),this.domMain.appendChild(this.leftSidebar.domResize),this._updateSidebarsPosition(),this.leftSidebar._updateCanvasPosition(this.domCanvas),this.leftSidebar},addRightSidebar:function(){this.rightSidebar=new t(this.cbResize_);var i=this.rightSidebar.domSidebar;return this.domMain.appendChild(i),this.domMain.appendChild(this.rightSidebar.domResize),this.rightSidebar._onTheRight(),this._updateSidebarsPosition(),this.rightSidebar._updateCanvasPosition(this.domCanvas),this.rightSidebar},addTopbar:function(){return this.topbar=new i(this.cbResize_),this.domMain.appendChild(this.topbar.domTopbar),this._updateSidebarsPosition(),this.topbar._updateCanvasPosition(this.domCanvas),this.topbar},setVisibility:function(t){this.domMain.hidden=!t,this._onWindowResize()}},e}),e("yagui",["GuiMain"],function(t){var i={};return i.GuiMain=t,window.yagui=i,i}),i("yagui")}();