!function(){var t,e,i;return function(o){function n(t,e){return x.call(t,e)}function s(t,e){var i,o,n,s,a,r,d,u,h,l,c,m=e&&e.split("/"),p=v.map,g=p&&p["*"]||{};if(t&&"."===t.charAt(0))if(e){for(m=m.slice(0,m.length-1),t=t.split("/"),a=t.length-1,v.nodeIdCompat&&_.test(t[a])&&(t[a]=t[a].replace(_,"")),t=m.concat(t),h=0;h<t.length;h+=1)if(c=t[h],"."===c)t.splice(h,1),h-=1;else if(".."===c){if(1===h&&(".."===t[2]||".."===t[0]))break;h>0&&(t.splice(h-1,2),h-=2)}t=t.join("/")}else 0===t.indexOf("./")&&(t=t.substring(2));if((m||g)&&p){for(i=t.split("/"),h=i.length;h>0;h-=1){if(o=i.slice(0,h).join("/"),m)for(l=m.length;l>0;l-=1)if(n=p[m.slice(0,l).join("/")],n&&(n=n[o])){s=n,r=h;break}if(s)break;!d&&g&&g[o]&&(d=g[o],u=h)}!s&&d&&(s=d,r=u),s&&(i.splice(0,r,s),t=i.join("/"))}return t}function a(t,e){return function(){return m.apply(o,w.call(arguments,0).concat([t,e]))}}function r(t){return function(e){return s(e,t)}}function d(t){return function(e){f[t]=e}}function u(t){if(n(b,t)){var e=b[t];delete b[t],C[t]=!0,c.apply(o,e)}if(!n(f,t)&&!n(C,t))throw new Error("No "+t);return f[t]}function h(t){var e,i=t?t.indexOf("!"):-1;return i>-1&&(e=t.substring(0,i),t=t.substring(i+1,t.length)),[e,t]}function l(t){return function(){return v&&v.config&&v.config[t]||{}}}var c,m,p,g,f={},b={},v={},C={},x=Object.prototype.hasOwnProperty,w=[].slice,_=/\.js$/;p=function(t,e){var i,o=h(t),n=o[0];return t=o[1],n&&(n=s(n,e),i=u(n)),n?t=i&&i.normalize?i.normalize(t,r(e)):s(t,e):(t=s(t,e),o=h(t),n=o[0],t=o[1],n&&(i=u(n))),{f:n?n+"!"+t:t,n:t,pr:n,p:i}},g={require:function(t){return a(t)},exports:function(t){var e=f[t];return"undefined"!=typeof e?e:f[t]={}},module:function(t){return{id:t,uri:"",exports:f[t],config:l(t)}}},c=function(t,e,i,s){var r,h,l,c,m,v,x=[],w=typeof i;if(s=s||t,"undefined"===w||"function"===w){for(e=!e.length&&i.length?["require","exports","module"]:e,m=0;m<e.length;m+=1)if(c=p(e[m],s),h=c.f,"require"===h)x[m]=g.require(t);else if("exports"===h)x[m]=g.exports(t),v=!0;else if("module"===h)r=x[m]=g.module(t);else if(n(f,h)||n(b,h)||n(C,h))x[m]=u(h);else{if(!c.p)throw new Error(t+" missing "+h);c.p.load(c.n,a(s,!0),d(h),{}),x[m]=f[h]}l=i?i.apply(f[t],x):void 0,t&&(r&&r.exports!==o&&r.exports!==f[t]?f[t]=r.exports:l===o&&v||(f[t]=l))}else t&&(f[t]=i)},t=e=m=function(t,e,i,n,s){if("string"==typeof t)return g[t]?g[t](e):u(p(t,e).f);if(!t.splice){if(v=t,v.deps&&m(v.deps,v.callback),!e)return;e.splice?(t=e,e=i,i=null):t=o}return e=e||function(){},"function"==typeof i&&(i=n,n=s),n?c(o,t,e,i):setTimeout(function(){c(o,t,e,i)},4),m},m.config=function(t){return m(t)},t._defined=f,i=function(t,e,i){e.splice||(i=e,e=[]),n(f,t)||n(b,t)||(b[t]=[t,e,i])},i.amd={jQuery:!0}}(),i("../tools/almond",function(){}),i("utils/GuiUtils",["require","exports","module"],function(t,e,i){"use strict";var o={};o.makeProxy=function(t,e,i){for(var o=t.prototype,n=e.prototype,s=Object.keys(o),a=0,r=s.length;r>a;++a){var d=s[a];n[d]||(n[d]=i?i(o[d]):o[d])}},o.rgbToHsv=function(t){var e=t[0],i=t[1],o=t[2],n=Math.max(e,i,o),s=Math.min(e,i,o);if(s===n)return[0,0,s];var a=e===s?i-o:o===s?e-i:o-e,r=e===s?3:o===s?1:5;return[(r-a/(n-s))/6,(n-s)/n,n]},o.hsvToRgb=function(t){var e=6*t[0],i=t[1],o=t[2],n=Math.floor(e),s=e-n,a=o*(1-i),r=o*(1-s*i),d=o*(1-(1-s)*i),u=n%6;return 0===u?[o,d,a]:1===u?[r,o,a]:2===u?[a,o,d]:3===u?[a,r,o]:4===u?[d,a,o]:[o,a,r]},o.getValidColor=function(t){for(var e=0,i=t.length;i>e;++e)t[e]=Math.max(0,Math.min(1,t[e]));return t},o.getStrColor=function(t){return 3===t.length?o.rgbToHex(t):"rgba("+Math.round(255*t[0])+","+Math.round(255*t[1])+","+Math.round(255*t[2])+","+t[3]+")"},o.getColorMult=function(t,e){var i=[t[0]*e,t[1]*e,t[2]*e];return 4===t.length&&i.push(t[3]),o.getValidColor(i)},o.getColorAdd=function(t,e){var i=[t[0]+e,t[1]+e,t[2]+e];return 4===t.length&&i.push(t[3]),o.getValidColor(i)},o.rgbToHex=function(t){for(var e="#",i=0;3>i;++i){var o=Math.round(255*t[i]).toString(16);e+=1===o.length?"0"+o:o}return e},o.hexToRgb=function(t){var e=0;"#"===t[0]&&(t=t.slice(1));var i=t;if(t.length>6)i=t.slice(0,6);else if(t.length<6)for(i="",e=0;3>e;++e)i+=t[e]?t[e]+t[e]:"00";var o=[0,0,0];for(e=0;3>e;++e){var n=parseInt(i[2*e]+i[2*e+1],16);o[e]=(n!==n?0:n)/255}return o},i.exports=o}),i("widgets/BaseWidget",["require","exports","module"],function(t,e,i){"use strict";var o=function(){};o.prototype={_getInitialValue:function(t,e){return"string"!=typeof e?t:t[e]},_getCheckCallback:function(t,e){return"string"!=typeof e?e:function(i){t[e]=i}},_setDomContainer:function(t){this.domContainer=t},setCallback:function(t){this.callback=t},setVisibility:function(t){this.domContainer&&(this.domContainer.hidden=!t)}},i.exports=o}),i("widgets/Button",["require","exports","module","utils/GuiUtils","widgets/BaseWidget"],function(t,e,i){"use strict";var o=t("utils/GuiUtils"),n=t("widgets/BaseWidget"),s=function(t,e,i){var o=i?e[i].bind(e):e;this.domButton=document.createElement("button"),this.domButton.className="gui-button",this.domButton.innerHTML=t||"",this.domButton.addEventListener("click",this._onClick.bind(this)),this.setCallback(o)};s.prototype={setEnable:function(t){this.domButton.disabled=void 0===t?!1:!t},_onClick:function(){this.callback&&this.callback()}},o.makeProxy(n,s),i.exports=s}),i("widgets/Checkbox",["require","exports","module","utils/GuiUtils","widgets/BaseWidget"],function(t,e,i){"use strict";var o=t("utils/GuiUtils"),n=t("widgets/BaseWidget"),s=function(t,e){var i=this._getInitialValue(t,e),o=this._getCheckCallback(t,e);this.domCheckbox=document.createElement("input"),this.domCheckbox.className="gui-input-checkbox",this.domCheckbox.type="checkbox",this.domLabelCheckbox=document.createElement("label"),this.setValue(void 0===i?!0:i),this.setCallback(o)};s.prototype={_onMouseDown:function(){this.setValue(!this.domCheckbox.checked)},setValue:function(t,e){this.domCheckbox.checked=t,!e&&this.callback&&this.callback(t)},getValue:function(){return this.domCheckbox.checked}},o.makeProxy(n,s),i.exports=s}),i("widgets/Color",["require","exports","module","utils/GuiUtils","widgets/BaseWidget"],function(t,e,i){"use strict";var o=t("utils/GuiUtils"),n=t("widgets/BaseWidget"),s=["-moz-","-o-","-webkit-","-ms-",""],a='url("data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAgAAAAICAIAAABLbSncAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAChJREFUeNpiPHPmDAMMGBsbw9lMDDgA6RKM%2F%2F%2F%2Fh3POnj1LCzsAAgwAQtYIcFfEyzkAAAAASUVORK5CYII%3D")',r=function(t,e){var i=this._getInitialValue(t,e),n=this._getCheckCallback(t,e);i?this.color=o.getValidColor(i.slice()):this.color=[1,0,0],this.domColor=document.createElement("div"),this.domColor.className="gui-widget-color",this.domInputColor=document.createElement("input"),this.domPopup=document.createElement("div"),this.domHue=document.createElement("div"),this.domHue.className="gui-color-hue",this.domHueKnob=document.createElement("div"),this.domHueKnob.className="gui-knob-hue",this.domSaturation=document.createElement("div"),this.domSaturation.className="gui-color-saturation";var s=document.createElement("div");this.domSaturation.appendChild(s),this.domSaturationKnob=document.createElement("div"),this.domSaturationKnob.className="gui-knob-saturation",this.domHue.appendChild(this.domHueKnob),this.domPopup.appendChild(this.domSaturationKnob),this.domPopup.appendChild(this.domSaturation),this.domPopup.appendChild(this.domHue),this.domColor.appendChild(this.domInputColor),this.domColor.appendChild(this.domPopup),this._hueGradient(this.domHue),this._linearGradient(s,"top","rgba(0,0,0,0)","#000"),this.domColor.addEventListener("keydown",this._onInputDown.bind(this)),this.domSaturation.addEventListener("mousedown",this._onSaturationDown.bind(this)),this.domHue.addEventListener("mousedown",this._onHueDown.bind(this)),window.addEventListener("mouseup",this._onMouseUp.bind(this)),window.addEventListener("mouseout",this._onMouseUp.bind(this)),window.addEventListener("mousemove",this._onMouseMove.bind(this)),this.hasAlpha=4===this.color.length,this.alpha=1,this.hasAlpha&&(this.domPopup.style.width="142px",this.domAlpha=document.createElement("div"),this.domAlpha.className="gui-color-alpha",this.domAlphaKnob=document.createElement("div"),this.domAlphaKnob.className="gui-knob-alpha",this._alphaGradient(this.domAlpha,"top","rgba(0,0,0,1.0)","rgba(0,0,0,0.0)"),this.domAlpha.addEventListener("mousedown",this._onAlphaDown.bind(this)),this.domAlpha.appendChild(this.domAlphaKnob),this.domPopup.appendChild(this.domAlpha)),this.editHue=this.editSaturation=this.editAlpha=!1,this.widgetHeight=this.widgetWidth=100,this.setValue(this.color),this.setCallback(n)};r.prototype={_onInputDown:function(t){t.stopPropagation(),13===t.keyCode&&this.setValue(o.hexToRgb(t.target.value))},_onUpdateSaturation:function(t){var e=this.domSaturation.getBoundingClientRect(),i=o.rgbToHsv(this.getValue());i[1]=Math.min(1,Math.max(0,(t.clientX-e.left)/e.width)),i[2]=Math.min(1,Math.max(0,1-(t.clientY-e.top)/e.width)),this.setValue(o.hsvToRgb(i),!1,!0),this._updateGui()},_onUpdateHue:function(t){var e=this.domHue.getBoundingClientRect(),i=o.rgbToHsv(this.getValue());i[0]=Math.min(1,Math.max(0,1-(t.clientY-e.top)/e.height)),this.setValue(o.hsvToRgb(i),!1,!0),this._updateGui()},_onUpdateAlpha:function(t){var e=this.domAlpha.getBoundingClientRect(),i=this.getValue();i[3]=this.alpha=Math.min(1,Math.max(0,1-(t.clientY-e.top)/e.height)),this.setValue(i,!1,!0),this._updateGui()},_updateGui:function(){var t=this.getValue(),e=o.rgbToHsv(t);this.domSaturationKnob.style.marginLeft=this.widgetWidth*e[1]-7+"px",this.domSaturationKnob.style.marginTop=this.widgetHeight*(1-e[2])-7+"px",e[1]=e[2]=1,this._linearGradient(this.domSaturation,"left","#fff",o.getStrColor(o.hsvToRgb(e))),this.domHueKnob.style.marginTop=(1-e[0])*this.widgetHeight+"px",this.hasAlpha&&void 0!==t[3]&&(this.domAlphaKnob.style.marginTop=(1-this.alpha)*this.widgetHeight+"px")},_onMouseMove:function(t){return this.editSaturation||this.editHue||this.editAlpha?this.editSaturation?this._onUpdateSaturation(t):this.editHue?this._onUpdateHue(t):this.editAlpha?this._onUpdateAlpha(t):void 0:void 0},_onSaturationDown:function(t){this.editSaturation=!0,this._onMouseMove(t)},_onHueDown:function(t){this.editHue=!0,this._onMouseMove(t)},_onAlphaDown:function(t){this.editAlpha=!0,this._onMouseMove(t)},_onMouseUp:function(){this.editHue=this.editSaturation=this.editAlpha=!1},_hueGradient:function(t){t.style.background="";for(var e=0,i=s.length;i>e;++e)t.style.cssText+="background: "+s[e]+"linear-gradient(top,  #ff0000 0%, #ff00ff 17%, #0000ff 34%, #00ffff 50%, #00ff00 67%, #ffff00 84%, #ff0000 100%);"},_alphaGradient:function(t,e,i,o){t.style.background="";for(var n=0,r=s.length;r>n;++n)t.style.cssText+="background: "+s[n]+"linear-gradient("+e+", "+i+","+o+"),"+a+";"},_linearGradient:function(t,e,i,o){t.style.background="";for(var n=0,a=s.length;a>n;++n)t.style.cssText+="background: "+s[n]+"linear-gradient("+e+", "+i+" 0%, "+o+" 100%);"},setValue:function(t,e,i){for(var n=this.color,s=0,a=t.length;a>s;++s)n[s]=t[s];var r=o.rgbToHex(t);if(this.domInputColor.value=r,this.hasAlpha){t.length>=4?this.alpha=t[3]:t.push(this.alpha);var d="rgba("+parseInt(255*t[0],10)+","+parseInt(255*t[1],10)+","+parseInt(255*t[2],10)+","+this.alpha+")";this._alphaGradient(this.domInputColor,"0deg",d,d)}else this.domInputColor.style.background=r;var u=o.rgbToHsv(t);this.domSaturationKnob.style.borderColor=u[2]<.5||u[1]>.5?"#fff":"#000",this.domInputColor.style.color=this.alpha>.2&&(u[2]<.5||u[1]>.5)?"#fff":"#000",i||this._updateGui(),!e&&this.callback&&this.callback(t)},getValue:function(){return this.color}},o.makeProxy(n,r),i.exports=r}),i("widgets/Combobox",["require","exports","module","utils/GuiUtils","widgets/BaseWidget"],function(t,e,i){"use strict";var o=t("utils/GuiUtils"),n=t("widgets/BaseWidget"),s=function(t,e,i){var o=this._getInitialValue(t,e),n=this._getCheckCallback(t,e);i=i||{},o=o||i[0],this.domSelect=document.createElement("select"),this.domSelect.className="gui-select",this.addOptions(i),this.domSelect.addEventListener("change",this._onChange.bind(this)),this.setValue(o),this.setCallback(n)};s.prototype={_onChange:function(t){this.setValue(t.target.value)},addOptions:function(t){for(var e=Object.keys(t),i=0;i<e.length;++i){var o=document.createElement("option");o.innerHTML=t[e[i]],o.value=e[i],this.domSelect.appendChild(o)}},setValue:function(t,e){this.domSelect.value=t,!e&&this.callback&&this.callback(t)},getValue:function(){return this.domSelect.value}},o.makeProxy(n,s),i.exports=s}),i("widgets/Slider",["require","exports","module","utils/GuiUtils","widgets/BaseWidget"],function(t,e,i){"use strict";var o=t("utils/GuiUtils"),n=t("widgets/BaseWidget"),s=function(t,e,i,o,n){var s=this._getInitialValue(t,e),a=this._getCheckCallback(t,e);s=void 0!==s?s:100,i=void 0!==i?i:0,o=void 0!==o?o:200,n=void 0!==n?n:1,this.domSlider=document.createElement("div"),this.domSlider.className="gui-slider",this.domSliderFill=document.createElement("div"),this.domSlider.appendChild(this.domSliderFill),this.domInputText=document.createElement("input"),this.domInputText.className="gui-input-number",this.domInputText.type="number",this.min=this.domInputText.min=i,this.max=this.domInputText.max=o,this.step=this.domInputText.step=n,this.domInputText.addEventListener("keydown",this._onKeyDown.bind(this)),this.domInputText.addEventListener("change",this._onInputText.bind(this)),this.domInputText.addEventListener("blur",this._onInputText.bind(this)),this.domSlider.addEventListener("mousedown",this._onMouseDown.bind(this)),window.addEventListener("mouseup",this._onMouseUp.bind(this),!0),window.addEventListener("mousemove",this._onMouseMove.bind(this)),this.lastValue=s,this.isDown=!1,this.setValue(s),this.setCallback(a)};s.prototype={_onInputText:function(t){var e=parseFloat(t.target.value);e===e&&e!==this.lastValue&&this.setValue(e)},_onKeyDown:function(t){t.stopPropagation(),13===t.which&&this.domInputText.blur()},_onMouseMove:function(t){if(t.preventDefault(),this.isDown){var e=this.domSlider.getBoundingClientRect(),i=this.min+(this.max-this.min)*((t.clientX-e.left)/e.width);this.setValue(i)}},_onMouseDown:function(t){this.isDown=!0,this._onMouseMove(t)},_onMouseUp:function(){this.isDown=!1},_setDomContainer:function(t){this.domContainer=t},getValue:function(){return parseFloat(this.domInputText.value)},setValue:function(t,e){this.lastValue=t,t=Math.max(Math.min(t,this.max),this.min),t=Math.round(t/this.step)*this.step,this.domInputText.value=t;var i=this.min;this.max!==this.min&&(i=(t-this.min)/(this.max-this.min)),this.domSliderFill.style.width=100*i+"%",!e&&this.callback&&this.callback(t)},setMax:function(t){return this.domInputText.max=this.max=t,this},setMin:function(t){return this.min=t,this}},o.makeProxy(n,s),i.exports=s}),i("widgets/Title",["require","exports","module","utils/GuiUtils","widgets/BaseWidget"],function(t,e,i){"use strict";var o=t("utils/GuiUtils"),n=t("widgets/BaseWidget"),s=function(t){this.domText=document.createElement("div"),this.domText.innerHTML=t||"",this.domText.className="group-title"};s.prototype={setText:function(t){this.domText.innerHTML=t},setVisibility:function(t){this.domText.hidden=!t}},o.makeProxy(n,s),i.exports=s}),i("containers/BaseContainer",["require","exports","module","widgets/Button","widgets/Checkbox","widgets/Color","widgets/Combobox","widgets/Slider","widgets/Title"],function(t,e,i){"use strict";var o=t("widgets/Button"),n=t("widgets/Checkbox"),s=t("widgets/Color"),a=t("widgets/Combobox"),r=t("widgets/Slider"),d=t("widgets/Title"),u=function(){};u.prototype={_addLine:function(t){var e=document.createElement("li");return e.innerHTML=t||"",this.domUl.appendChild(e),e},_createLabel:function(t){var e=document.createElement("label");return e.className="gui-label-side",e.innerHTML=t||"",e},_setDomContainer:function(t){this.domContainer=t},addTitle:function(t){var e=new d(t);return this.domUl.appendChild(e.domText),e},addCheckbox:function(t,e,i){var o=new n(e,i),s=this._addLine();s.className+=" gui-pointerOnHover gui-glowOnHover";var a=this._createLabel(t);return a.style.overflow="visible",a.className+=" gui-pointerOnHover",s.appendChild(a),s.appendChild(o.domCheckbox),s.appendChild(o.domLabelCheckbox),s.addEventListener("mousedown",o._onMouseDown.bind(o)),o._setDomContainer(s),o},addCombobox:function(t,e,i,o){var n=new a(e,i,o),s=this._addLine();return t?s.appendChild(this._createLabel(t)):n.domSelect.style.width="100%",s.appendChild(n.domSelect),n._setDomContainer(s),n},addSlider:function(t,e,i,o,n,s){var a=new r(e,i,o,n,s),d=this._addLine();return t&&d.appendChild(this._createLabel(t)),d.appendChild(a.domInputText),d.appendChild(a.domSlider),a._setDomContainer(d),a},addColor:function(t,e,i){var o=new s(e,i),n=this._addLine();return t?n.appendChild(this._createLabel(t)):o.domColor.style.width="100%",n.appendChild(o.domColor),o._setDomContainer(n),o},addButton:function(t,e,i){var n=new o(t,e,i),s=this._addLine();return s.appendChild(n.domButton),n._setDomContainer(s),n},addDualButton:function(t,e,i,n,s,a){var r=new o(t,i,s),d=new o(e,n,a),u=this._addLine();u.appendChild(d.domButton),u.appendChild(r.domButton);var h=r.domButton.style,l=d.domButton.style;return h.width=l.width="49%",h.marginRight=l.marginLeft="1%",r._setDomContainer(u),d._setDomContainer(u),[r,d]},setVisibility:function(t){this.domContainer&&(this.domContainer.hidden=!t)}},i.exports=u}),i("containers/Folder",["require","exports","module","utils/GuiUtils","containers/BaseContainer"],function(t,e,i){"use strict";var o=t("utils/GuiUtils"),n=t("containers/BaseContainer"),s=function(t){this.domUl=document.createElement("ul"),this.domUl.setAttribute("opened",!0);var e=document.createElement("label");e.innerHTML=t||"",e.addEventListener("mousedown",this._onMouseDown.bind(this)),this.domUl.appendChild(e),this.isOpen=!0};s.prototype={_onMouseDown:function(){this.isOpen=!this.isOpen,this.domUl.setAttribute("opened",this.isOpen)},open:function(){this.isOpen=!0,this.domUl.setAttribute("opened",!0)},close:function(){this.isOpen=!1,this.domUl.setAttribute("opened",!1)},setVisibility:function(t){t?this.isOpen&&this.domUl.setAttribute("opened",!0):this.domUl.setAttribute("opened",!1),this.domUl.style.height=t?"auto":"0px"}},o.makeProxy(n,s),i.exports=s}),i("containers/Sidebar",["require","exports","module","containers/Folder"],function(t,e,i){"use strict";var o=t("containers/Folder"),n=function(t){this.domSidebar=document.createElement("div"),this.domSidebar.className="gui-sidebar",this.domResize=document.createElement("div"),this.domResize.className="gui-resize",this.isDragging=!1,this.mouseX=0,this.domResize.addEventListener("mousedown",this._onMouseDown.bind(this)),window.addEventListener("mousemove",this._onMouseMove.bind(this)),window.addEventListener("mouseup",this._onMouseUp.bind(this)),this.callbackResize=t,this.isOnTheRight=!1};n.prototype={_setTop:function(t){this.domSidebar.style.top=this.domResize.style.top=t+"px"},_onTheRight:function(){this.isOnTheRight=!0,this.domSidebar.style.right=0,this.domSidebar.style.borderRight=0,this.domSidebar.style.borderLeft="double",this.domSidebar.style.borderColor="rgba(255,255,255,0.3)",this.domResize.style.left="auto",this.domResize.style.right=this.domSidebar.offsetWidth+"px",this.domResize.style.marginRight="-3px"},_onMouseDown:function(t){this.isDragging=!0,this.mouseX=t.clientX},_updateCanvasPosition:function(t){var e=this.domSidebar.hidden?0:this.domSidebar.offsetWidth;this.isOnTheRight?t.width-=e:(t.style.left=this.domSidebar.offsetLeft+e+"px",t.width-=e)},_onMouseMove:function(t){if(this.isDragging!==!1){var e=t.clientX,i=e-this.mouseX;this.isOnTheRight&&(i=-i);var o=Math.max(50,this.domSidebar.offsetWidth+i),n=o+"px";this.domSidebar.style.width=n,this.isOnTheRight?this.domResize.style.right=this.domSidebar.offsetWidth+"px":this.domResize.style.left=n,this.mouseX=e,this.callbackResize()}},_onMouseUp:function(){this.isDragging=!1},addMenu:function(t){var e=new o(t);return this.domSidebar.appendChild(e.domUl),e},setVisibility:function(t){this.domSidebar.hidden=!t,this.domResize.hidden=!t,this.callbackResize()}},i.exports=n}),i("widgets/MenuButton",["require","exports","module","utils/GuiUtils","widgets/BaseWidget"],function(t,e,i){"use strict";var o=t("utils/GuiUtils"),n=t("widgets/BaseWidget"),s=function(t,e,i){var o=t;o&&"function"!=typeof o?o=t[e].bind(t):i=e,this.domSpan=document.createElement("span"),this.domSpan.className="shortcut",this.domSpan.innerHTML=i||"",this.setCallback(o)};s.prototype={_setDomContainer:function(t){this.domContainer=t,t.addEventListener("click",this._onClick.bind(this))},_onClick:function(){this.callback&&this.callback()}},o.makeProxy(n,s),i.exports=s}),i("containers/Menu",["require","exports","module","utils/GuiUtils","containers/BaseContainer","widgets/MenuButton"],function(t,e,i){"use strict";var o=t("utils/GuiUtils"),n=t("containers/BaseContainer"),s=t("widgets/MenuButton"),a=function(){this.domUl=document.createElement("ul")};a.prototype={addButton:function(t,e,i,o){var n=new s(e,i,o),a=this._addLine(t);return a.appendChild(n.domSpan),n._setDomContainer(a),n},addSlider:function(t,e,i,o,s,a){var r=n.prototype.addSlider.call(this,t,e,i,o,s,a);return r.domInputText.style.width="18%",r.domSlider.style.width=t?"44%":"80%",r}},o.makeProxy(n,a),i.exports=a}),i("utils/EditStyle",["require","exports","module","utils/GuiUtils"],function(t,e,i){"use strict";var o=t("utils/GuiUtils"),n={};n.refRules={};var s,a=function(){if(s)return s;for(var t=document.styleSheets,e=0,i=t.length;i>e;++e){var o=t[e].href;if(o&&-1!==o.indexOf("yagui.css"))return s=t[e]}},r=function(t,e,i){var o=a();if(o){var s=o.cssRules||o.rules,r=n.refRules[t];if(!r){var d=0,u=s.length;for(d=0;u>d&&s[d].selectorText!==t;++d);if(d===u)return!1;r=n.refRules[t]=s[d]}r&&(r.style[e]=i)}};n.changeWidgetsColor=function(t){var e=o.getStrColor(t);r(".gui-button","background",e),r(".gui-select","background",e),r(".gui-slider > div","background",e),n._curWidgetColor=t},n.changeDisplayBoorder=function(t){var e=t?"1px solid #000":"0";r(".gui-button","border",e),r(".gui-select","border",e),r(".gui-slider","border",e),r(".gui-input-number","border",e),r(".gui-sidebar > ul > label","borderTop",e),r(".gui-sidebar > ul > label","borderBottom",e),r(".gui-sidebar","borderLeft",e),r(".gui-sidebar","borderRight",e),r(".gui-topbar","borderBottom",e),n._curShowBorder=t},n.changeBackgroundColor=function(t){r(".gui-sidebar","background",o.getStrColor(t));var e=o.getStrColor(o.getColorMult(t,.5));r(".gui-topbar","background",e),r(".gui-topbar ul > li > ul","background",e),n._curBackgroundColor=t},n.changeTextColor=function(t){var e=o.getStrColor(t);r("*","color",e),r(".gui-sidebar > ul > label","color",e),n._curTextColor=t},n.changeOverallColor=function(t){n.changeWidgetsColor(t);var e=o.getColorMult(t,.5);e.length=3,n.changeBackgroundColor(e);for(var i=o.getColorAdd(t,.5),s=0;3>s;++s)i[s]=Math.min(.8,i[s]);n.changeTextColor(i),n._curWidgetColor=t,n._curBackgroundColor=e,n._curTextColor=i},n._curTextColor=[.73,.73,.73,1],n._curWidgetColor=[.32,.37,.39,1],n._curBackgroundColor=[.24,.24,.24],n._curShowBorder=!1,n.changeOverallColor([.3,.34,.4,1]),i.exports=n}),i("containers/Topbar",["require","exports","module","containers/Menu","utils/EditStyle"],function(t,e,i){"use strict";var o=t("containers/Menu"),n=t("utils/EditStyle"),s=function(t){this.domTopbar=document.createElement("div"),this.domTopbar.className="gui-topbar",this.domUl=document.createElement("ul"),this.domTopbar.appendChild(this.domUl),this.callbackResize=t,this.uiExtra={}};s.prototype={_updateCanvasPosition:function(t){var e=this.domTopbar.hidden?0:this.domTopbar.offsetHeight;t.style.top=e+"px",t.height-=e},_onChangeColor:function(t,e){t(e),this.uiExtra.overallColor.setValue(n._curWidgetColor,!0),this.uiExtra.widgetColor.setValue(n._curWidgetColor,!0),this.uiExtra.backColor.setValue(n._curBackgroundColor,!0),this.uiExtra.textColor.setValue(n._curTextColor,!0)},addMenu:function(t){var e=new o,i=document.createElement("li");return i.innerHTML=t||"",this.domUl.appendChild(i),i.appendChild(e.domUl),e._setDomContainer(i),e},addExtra:function(){var t=this._onChangeColor,e=this.addMenu("Extra UI"),i=this.uiExtra;return e.addTitle("Overall"),i.overallColor=e.addColor("",n._curWidgetColor,t.bind(this,n.changeOverallColor)),e.addTitle("Advanced"),i.widgetColor=e.addColor("Widget",n._curWidgetColor,t.bind(this,n.changeWidgetsColor)),i.backColor=e.addColor("Back",n._curBackgroundColor,t.bind(this,n.changeBackgroundColor)),i.textColor=e.addColor("Text",n._curTextColor,t.bind(this,n.changeTextColor)),i.showBorder=e.addCheckbox("Border",n._curShowBorder,n.changeDisplayBoorder),e},setVisibility:function(t){this.domTopbar.hidden=!t,this.callbackResize()}},i.exports=s}),i("GuiMain",["require","exports","module","containers/Sidebar","containers/Topbar"],function(t,e,i){"use strict";var o=t("containers/Sidebar"),n=t("containers/Topbar"),s=function(t,e){this.domMain=document.createElement("div"),this.domCanvas=t,this.callbackResize=e,this.domCanvas&&(this.domCanvas.width=window.innerWidth,this.domCanvas.height=window.innerHeight),this.cbResize_=this._onWindowResize.bind(this),document.body.appendChild(this.domMain),this.leftSidebar=void 0,this.rightSidebar=void 0,this.topbar=void 0,window.addEventListener("resize",this._onWindowResize.bind(this),!1)};s.prototype={_onWindowResize:function(){this.domCanvas&&(this.domCanvas.width=window.innerWidth,this.domCanvas.height=window.innerHeight,this.domCanvas.left=0,this.domCanvas.top=0,this.leftSidebar&&this.leftSidebar._updateCanvasPosition(this.domCanvas),this.rightSidebar&&this.rightSidebar._updateCanvasPosition(this.domCanvas),this.topbar&&this.topbar._updateCanvasPosition(this.domCanvas)),this._updateSidebarsPosition(),this.callbackResize&&this.callbackResize()},_updateSidebarsPosition:function(){if(this.topbar){var t=this.topbar.domTopbar.offsetHeight;this.leftSidebar&&this.leftSidebar._setTop(t),this.rightSidebar&&this.rightSidebar._setTop(t)}},addLeftSidebar:function(){this.leftSidebar=new o(this.cbResize_);var t=this.leftSidebar.domSidebar;return this.domMain.appendChild(t),this.domMain.appendChild(this.leftSidebar.domResize),this._updateSidebarsPosition(),this.leftSidebar._updateCanvasPosition(this.domCanvas),this.leftSidebar},addRightSidebar:function(){this.rightSidebar=new o(this.cbResize_);var t=this.rightSidebar.domSidebar;return this.domMain.appendChild(t),this.domMain.appendChild(this.rightSidebar.domResize),this.rightSidebar._onTheRight(),this._updateSidebarsPosition(),this.rightSidebar._updateCanvasPosition(this.domCanvas),this.rightSidebar},addTopbar:function(){return this.topbar=new n(this.cbResize_),this.domMain.appendChild(this.topbar.domTopbar),this._updateSidebarsPosition(),this.topbar._updateCanvasPosition(this.domCanvas),this.topbar},setVisibility:function(t){this.domMain.hidden=!t,this._onWindowResize()}},i.exports=s}),i("yagui",["require","exports","module","GuiMain"],function(t,e,i){"use strict";var o=t("GuiMain"),n={};n.GuiMain=o,window.yagui=n,i.exports=n}),e("yagui")}();