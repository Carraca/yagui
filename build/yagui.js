!function(t,e){"object"==typeof exports&&"object"==typeof module?module.exports=e():"function"==typeof define&&define.amd?define([],e):"object"==typeof exports?exports.yagui=e():t.yagui=e()}(window,(function(){return function(t){function e(o){if(n[o])return n[o].exports;var i=n[o]={i:o,l:!1,exports:{}};return t[o].call(i.exports,i,i.exports,e),i.l=!0,i.exports}var n={};return e.m=t,e.c=n,e.d=function(t,n,o){e.o(t,n)||Object.defineProperty(t,n,{enumerable:!0,get:o})},e.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},e.t=function(t,n){if(1&n&&(t=e(t)),8&n)return t;if(4&n&&"object"==typeof t&&t&&t.__esModule)return t;var o=Object.create(null);if(e.r(o),Object.defineProperty(o,"default",{enumerable:!0,value:t}),2&n&&"string"!=typeof t)for(var i in t)e.d(o,i,function(e){return t[e]}.bind(null,i));return o},e.n=function(t){var n=t&&t.__esModule?function(){return t.default}:function(){return t};return e.d(n,"a",n),n},e.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},e.p="",e(e.s=0)}([function(t,e,n){var o={GuiMain:n(1).default};t.exports=o},function(t,e,n){"use strict";function o(t,e){for(var n=0;n<e.length;n++){var o=e[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,o.key,o)}}function i(t){return(i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function r(t,e){for(var n=0;n<e.length;n++){var o=e[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,o.key,o)}}function a(t){return(a=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function u(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function l(t,e){return(l=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function s(t){return(s="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function c(t,e){for(var n=0;n<e.length;n++){var o=e[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,o.key,o)}}function d(t){return(d=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function f(t,e){return(f=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function h(t){return(h="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function p(t,e){for(var n=0;n<e.length;n++){var o=e[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,o.key,o)}}function b(t){return(b=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function m(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function y(t,e){return(y=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function v(t){return(v="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function g(t,e){for(var n=0;n<e.length;n++){var o=e[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,o.key,o)}}function _(t){return(_=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function w(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function k(t,e){return(k=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function C(t){return(C="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function S(t,e){for(var n=0;n<e.length;n++){var o=e[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,o.key,o)}}function O(t){return(O=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function x(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function T(t,e){return(T=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function E(t){return(E="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function j(t,e){for(var n=0;n<e.length;n++){var o=e[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,o.key,o)}}function M(t){return(M=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function P(t,e){return(P=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function R(t,e){for(var n=0;n<e.length;n++){var o=e[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,o.key,o)}}function A(t){return(A="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function L(t,e){for(var n=0;n<e.length;n++){var o=e[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,o.key,o)}}function V(t){return(V=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function B(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function H(t,e){return(H=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function D(t,e){for(var n=0;n<e.length;n++){var o=e[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,o.key,o)}}function I(t){return(I="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function U(t,e){for(var n=0;n<e.length;n++){var o=e[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,o.key,o)}}function z(t){return(z=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function W(t,e){return(W=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function N(t){return(N="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function K(t,e){for(var n=0;n<e.length;n++){var o=e[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,o.key,o)}}function G(t,e,n){return(G="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(t,e,n){var o=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=F(t)););return t}(t,e);if(o){var i=Object.getOwnPropertyDescriptor(o,e);return i.get?i.get.call(n):i.value}})(t,e,n||t)}function F(t){return(F=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function X(t,e){return(X=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function Y(t){return(Y="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function Z(t,e){for(var n=0;n<e.length;n++){var o=e[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,o.key,o)}}function J(t){return(J=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function Q(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function q(t,e){return(q=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function $(t){return($="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function tt(t,e){for(var n=0;n<e.length;n++){var o=e[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,o.key,o)}}function et(t){return(et=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function nt(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function ot(t,e){return(ot=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function it(t,e){for(var n=0;n<e.length;n++){var o=e[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,o.key,o)}}function rt(t,e){for(var n=0;n<e.length;n++){var o=e[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,o.key,o)}}n.r(e);var at,ut=function(){function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t)}return function(t,e,n){e&&o(t.prototype,e)}(t,[{key:"_getInitialValue",value:function(t,e){return"string"!=typeof e?t:t[e]}},{key:"_getCheckCallback",value:function(t,e){return"string"!=typeof e?e:function(n){t[e]=n}}},{key:"_setDomContainer",value:function(t){this.domContainer=t}},{key:"setCallback",value:function(t){this.callback=t}},{key:"setVisibility",value:function(t){this.domContainer&&(this.domContainer.hidden=!t)}}]),t}(),lt=function(t){function e(t,n,o){var r;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),r=function(t,e){return!e||"object"!==i(e)&&"function"!=typeof e?u(t):e}(this,a(e).call(this));var l=o?n[o].bind(n):n;return r.domButton=document.createElement("button"),r.domButton.className="gui-button",r.domButton.innerHTML=t||"",r.domButton.addEventListener("click",r._onClick.bind(u(r))),r.setCallback(l),r}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&l(t,e)}(e,ut),function(t,e,n){e&&r(t.prototype,e)}(e,[{key:"setEnable",value:function(t){this.domButton.disabled=void 0!==t&&!t}},{key:"_onClick",value:function(){this.callback&&this.callback()}}]),e}(),st=function(t){function e(t,n){var o;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e);var i=(o=function(t,e){return!e||"object"!==s(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}(this,d(e).call(this)))._getInitialValue(t,n),r=o._getCheckCallback(t,n);return o.domCheckbox=document.createElement("input"),o.domCheckbox.className="gui-input-checkbox",o.domCheckbox.type="checkbox",o.domLabelCheckbox=document.createElement("label"),o.setValue(void 0===i||i),o.setCallback(r),o}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&f(t,e)}(e,ut),function(t,e,n){e&&c(t.prototype,e)}(e,[{key:"_onMouseDown",value:function(){this.setValue(!this.domCheckbox.checked)}},{key:"setValue",value:function(t,e){this.domCheckbox.checked=t,!e&&this.callback&&this.callback(t)}},{key:"getValue",value:function(){return this.domCheckbox.checked}}]),e}(),ct={rgbToHsv:function(t){var e=t[0],n=t[1],o=t[2],i=Math.max(e,n,o),r=Math.min(e,n,o);return r===i?[0,0,r]:[((e===r?3:o===r?1:5)-(e===r?n-o:o===r?e-n:o-e)/(i-r))/6,(i-r)/i,i]},hsvToRgb:function(t){var e=6*t[0],n=t[1],o=t[2],i=Math.floor(e),r=e-i,a=o*(1-n),u=o*(1-r*n),l=o*(1-(1-r)*n),s=i%6;return 0===s?[o,l,a]:1===s?[u,o,a]:2===s?[a,o,l]:3===s?[a,u,o]:4===s?[l,a,o]:[o,a,u]},getValidColor:function(t){for(var e=0,n=t.length;e<n;++e)t[e]=Math.max(0,Math.min(1,t[e]));return t},getStrColor:function(t){return 3===t.length?ct.rgbToHex(t):"rgba("+Math.round(255*t[0])+","+Math.round(255*t[1])+","+Math.round(255*t[2])+","+t[3]+")"},getColorMult:function(t,e){var n=[t[0]*e,t[1]*e,t[2]*e];return 4===t.length&&n.push(t[3]),ct.getValidColor(n)},getColorAdd:function(t,e){var n=[t[0]+e,t[1]+e,t[2]+e];return 4===t.length&&n.push(t[3]),ct.getValidColor(n)},rgbToHex:function(t){for(var e="#",n=0;n<3;++n){var o=Math.round(255*t[n]).toString(16);e+=1===o.length?"0"+o:o}return e},hexToRgb:function(t){var e=0;"#"===t[0]&&(t=t.slice(1));var n=t;if(t.length>6)n=t.slice(0,6);else if(t.length<6)for(n="",e=0;e<3;++e)n+=t[e]?t[e]+t[e]:"00";var o=[0,0,0];for(e=0;e<3;++e){var i=parseInt(n[2*e]+n[2*e+1],16);o[e]=(i!=i?0:i)/255}return o}},dt=ct,ft=["-moz-","-o-","-webkit-","-ms-",""],ht=function(t){function e(t,n){var o;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e);var i=(o=function(t,e){return!e||"object"!==h(e)&&"function"!=typeof e?m(t):e}(this,b(e).call(this)))._getInitialValue(t,n),r=o._getCheckCallback(t,n);o.color=i?dt.getValidColor(i.slice()):[1,0,0],o.domColor=document.createElement("div"),o.domColor.className="gui-widget-color",o.domInputColor=document.createElement("input"),o.domPopup=document.createElement("div"),o.domHue=document.createElement("div"),o.domHue.className="gui-color-hue",o.domHueKnob=document.createElement("div"),o.domHueKnob.className="gui-knob-hue",o.domSaturation=document.createElement("div"),o.domSaturation.className="gui-color-saturation";var a=document.createElement("div");return o.domSaturation.appendChild(a),o.domSaturationKnob=document.createElement("div"),o.domSaturationKnob.className="gui-knob-saturation",o.domHue.appendChild(o.domHueKnob),o.domPopup.appendChild(o.domSaturationKnob),o.domPopup.appendChild(o.domSaturation),o.domPopup.appendChild(o.domHue),o.domColor.appendChild(o.domInputColor),o.domColor.appendChild(o.domPopup),o._hueGradient(o.domHue),o._linearGradient(a,"top","rgba(0,0,0,0)","#000"),o.domColor.addEventListener("keydown",o._onInputDown.bind(m(o))),o.domSaturation.addEventListener("mousedown",o._onSaturationDown.bind(m(o))),o.domHue.addEventListener("mousedown",o._onHueDown.bind(m(o))),window.addEventListener("mouseup",o._onMouseUp.bind(m(o))),window.addEventListener("mouseout",o._onMouseUp.bind(m(o))),window.addEventListener("mousemove",o._onMouseMove.bind(m(o))),o.hasAlpha=4===o.color.length,o.alpha=1,o.hasAlpha&&(o.domPopup.style.width="142px",o.domAlpha=document.createElement("div"),o.domAlpha.className="gui-color-alpha",o.domAlphaKnob=document.createElement("div"),o.domAlphaKnob.className="gui-knob-alpha",o._alphaGradient(o.domAlpha,"top","rgba(0,0,0,1.0)","rgba(0,0,0,0.0)"),o.domAlpha.addEventListener("mousedown",o._onAlphaDown.bind(m(o))),o.domAlpha.appendChild(o.domAlphaKnob),o.domPopup.appendChild(o.domAlpha)),o.editHue=o.editSaturation=o.editAlpha=!1,o.widgetHeight=o.widgetWidth=100,o.setValue(o.color),o.setCallback(r),o}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&y(t,e)}(e,ut),function(t,e,n){e&&p(t.prototype,e)}(e,[{key:"_onInputDown",value:function(t){t.stopPropagation(),13===t.keyCode&&this.setValue(dt.hexToRgb(t.target.value))}},{key:"_onUpdateSaturation",value:function(t){var e=this.domSaturation.getBoundingClientRect(),n=dt.rgbToHsv(this.getValue());n[1]=Math.min(1,Math.max(0,(t.clientX-e.left)/e.width)),n[2]=Math.min(1,Math.max(0,1-(t.clientY-e.top)/e.width)),this.setValue(dt.hsvToRgb(n),!1,!0),this._updateGui()}},{key:"_onUpdateHue",value:function(t){var e=this.domHue.getBoundingClientRect(),n=dt.rgbToHsv(this.getValue());n[0]=Math.min(1,Math.max(0,1-(t.clientY-e.top)/e.height)),this.setValue(dt.hsvToRgb(n),!1,!0),this._updateGui()}},{key:"_onUpdateAlpha",value:function(t){var e=this.domAlpha.getBoundingClientRect(),n=this.getValue();n[3]=this.alpha=Math.min(1,Math.max(0,1-(t.clientY-e.top)/e.height)),this.setValue(n,!1,!0),this._updateGui()}},{key:"_updateGui",value:function(){var t=this.getValue(),e=dt.rgbToHsv(t);this.domSaturationKnob.style.marginLeft=this.widgetWidth*e[1]-7+"px",this.domSaturationKnob.style.marginTop=this.widgetHeight*(1-e[2])-7+"px",e[1]=e[2]=1,this._linearGradient(this.domSaturation,"left","#fff",dt.getStrColor(dt.hsvToRgb(e))),this.domHueKnob.style.marginTop=(1-e[0])*this.widgetHeight+"px",this.hasAlpha&&void 0!==t[3]&&(this.domAlphaKnob.style.marginTop=(1-this.alpha)*this.widgetHeight+"px")}},{key:"_onMouseMove",value:function(t){if(this.editSaturation||this.editHue||this.editAlpha)return this.editSaturation?this._onUpdateSaturation(t):this.editHue?this._onUpdateHue(t):this.editAlpha?this._onUpdateAlpha(t):void 0}},{key:"_onSaturationDown",value:function(t){this.editSaturation=!0,this._onMouseMove(t)}},{key:"_onHueDown",value:function(t){this.editHue=!0,this._onMouseMove(t)}},{key:"_onAlphaDown",value:function(t){this.editAlpha=!0,this._onMouseMove(t)}},{key:"_onMouseUp",value:function(){this.editHue=this.editSaturation=this.editAlpha=!1}},{key:"_hueGradient",value:function(t){t.style.background="";for(var e=0,n=ft.length;e<n;++e)t.style.cssText+="background: "+ft[e]+"linear-gradient(top,  #ff0000 0%, #ff00ff 17%, #0000ff 34%, #00ffff 50%, #00ff00 67%, #ffff00 84%, #ff0000 100%);"}},{key:"_alphaGradient",value:function(t,e,n,o){t.style.background="";for(var i=0,r=ft.length;i<r;++i)t.style.cssText+="background: "+ft[i]+"linear-gradient("+e+", "+n+","+o+'),url("data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAgAAAAICAIAAABLbSncAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAChJREFUeNpiPHPmDAMMGBsbw9lMDDgA6RKM%2F%2F%2F%2Fh3POnj1LCzsAAgwAQtYIcFfEyzkAAAAASUVORK5CYII%3D");'}},{key:"_linearGradient",value:function(t,e,n,o){t.style.background="";for(var i=0,r=ft.length;i<r;++i)t.style.cssText+="background: "+ft[i]+"linear-gradient("+e+", "+n+" 0%, "+o+" 100%);"}},{key:"setValue",value:function(t,e,n){for(var o=this.color,i=0,r=t.length;i<r;++i)o[i]=t[i];var a=dt.rgbToHex(t);if(this.domInputColor.value=a,this.hasAlpha){t.length>=4?this.alpha=t[3]:t.push(this.alpha);var u="rgba("+parseInt(255*t[0],10)+","+parseInt(255*t[1],10)+","+parseInt(255*t[2],10)+","+this.alpha+")";this._alphaGradient(this.domInputColor,"0deg",u,u)}else this.domInputColor.style.background=a;var l=dt.rgbToHsv(t);this.domSaturationKnob.style.borderColor=l[2]<.5||l[1]>.5?"#fff":"#000",this.domInputColor.style.color=this.alpha>.2&&(l[2]<.5||l[1]>.5)?"#fff":"#000",n||this._updateGui(),!e&&this.callback&&this.callback(t)}},{key:"getValue",value:function(){return this.color}}]),e}(),pt=function(t){function e(t,n,o){var i;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e);var r=(i=function(t,e){return!e||"object"!==v(e)&&"function"!=typeof e?w(t):e}(this,_(e).call(this)))._getInitialValue(t,n),a=i._getCheckCallback(t,n);return o=o||{},r=void 0!==r?r:o[0],i.isArray=void 0!==o.length,i.domSelect=document.createElement("select"),i.domSelect.className="gui-select",i.addOptions(o),i.domSelect.addEventListener("change",i._onChange.bind(w(i))),i.setValue(r),i.setCallback(a),i}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&k(t,e)}(e,ut),function(t,e,n){e&&g(t.prototype,e)}(e,[{key:"_parseValue",value:function(t){return this.isArray?parseInt(t,10):t}},{key:"_onChange",value:function(t){this.setValue(t.target.value)}},{key:"addOptions",value:function(t){for(var e=Object.keys(t),n=0;n<e.length;++n){var o=document.createElement("option");o.innerHTML=t[e[n]],o.value=e[n],this.domSelect.appendChild(o)}}},{key:"setValue",value:function(t,e){this.domSelect.value=t,!e&&this.callback&&this.callback(this._parseValue(t))}},{key:"getValue",value:function(){return this._parseValue(this.domSelect.value)}}]),e}(),bt=function(t){function e(t,n,o,i,r){var a;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e);var u=(a=function(t,e){return!e||"object"!==C(e)&&"function"!=typeof e?x(t):e}(this,O(e).call(this)))._getInitialValue(t,n),l=a._getCheckCallback(t,n);return u=void 0!==u?u:100,o=void 0!==o?o:0,i=void 0!==i?i:200,r=void 0!==r?r:1,a.domSlider=document.createElement("div"),a.domSlider.className="gui-slider",a.domSliderFill=document.createElement("div"),a.domSlider.appendChild(a.domSliderFill),a.domInputText=document.createElement("input"),a.domInputText.className="gui-input-number",a.domInputText.type="number",a.min=a.domInputText.min=o,a.max=a.domInputText.max=i,a.step=a.domInputText.step=r,a.domInputText.addEventListener("keydown",a._onKeyDown.bind(x(a))),a.domInputText.addEventListener("change",a._onInputText.bind(x(a))),a.domInputText.addEventListener("blur",a._onInputText.bind(x(a))),a.domSlider.addEventListener("mousedown",a._onMouseDown.bind(x(a))),window.addEventListener("mouseup",a._onMouseUp.bind(x(a)),!0),window.addEventListener("mousemove",a._onMouseMove.bind(x(a))),a.lastValue=u,a.isDown=!1,a.setValue(u),a.setCallback(l),a}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&T(t,e)}(e,ut),function(t,e,n){e&&S(t.prototype,e)}(e,[{key:"_onInputText",value:function(t){var e=parseFloat(t.target.value);e==e&&e!==this.lastValue&&this.setValue(e)}},{key:"_onKeyDown",value:function(t){t.stopPropagation(),13===t.which&&this.domInputText.blur()}},{key:"_onMouseMove",value:function(t){if(t.preventDefault(),this.isDown){var e=this.domSlider.getBoundingClientRect(),n=this.min+(this.max-this.min)*((t.clientX-e.left)/e.width);this.setValue(n)}}},{key:"_onMouseDown",value:function(t){this.isDown=!0,this._onMouseMove(t)}},{key:"_onMouseUp",value:function(){this.isDown=!1}},{key:"_setDomContainer",value:function(t){this.domContainer=t}},{key:"getValue",value:function(){return parseFloat(this.domInputText.value)}},{key:"setValue",value:function(t,e){this.lastValue=t,t=Math.max(Math.min(t,this.max),this.min),t=Math.round(t/this.step)*this.step,this.domInputText.value=t;var n=this.min;this.max!==this.min&&(n=(t-this.min)/(this.max-this.min)),this.domSliderFill.style.width=100*n+"%",!e&&this.callback&&this.callback(t)}},{key:"setMax",value:function(t){return this.domInputText.max=this.max=t,this}},{key:"setMin",value:function(t){return this.min=t,this}}]),e}(),mt=function(t){function e(t){var n;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),(n=function(t,e){return!e||"object"!==E(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}(this,M(e).call(this))).domText=document.createElement("div"),n.domText.innerHTML=t||"",n.domText.className="group-title",n}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&P(t,e)}(e,ut),function(t,e,n){e&&j(t.prototype,e)}(e,[{key:"setText",value:function(t){this.domText.innerHTML=t}},{key:"setVisibility",value:function(t){this.domText.hidden=!t}}]),e}(),yt=function(){function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t)}return function(t,e,n){e&&R(t.prototype,e)}(t,[{key:"_addLine",value:function(t){var e=document.createElement("li");return e.innerHTML=t||"",this.domUl.appendChild(e),e}},{key:"_createLabel",value:function(t){var e=document.createElement("label");return e.className="gui-label-side",e.innerHTML=t||"",e}},{key:"_setDomContainer",value:function(t){this.domContainer=t}},{key:"addTitle",value:function(t){var e=new mt(t);return this.domUl.appendChild(e.domText),e}},{key:"addCheckbox",value:function(t,e,n){var o=new st(e,n),i=this._addLine();i.className+=" gui-pointerOnHover gui-glowOnHover";var r=this._createLabel(t);return r.style.overflow="visible",r.className+=" gui-pointerOnHover",i.appendChild(r),i.appendChild(o.domCheckbox),i.appendChild(o.domLabelCheckbox),i.addEventListener("mousedown",o._onMouseDown.bind(o)),o._setDomContainer(i),o}},{key:"addCombobox",value:function(t,e,n,o){var i=new pt(e,n,o),r=this._addLine();return t?r.appendChild(this._createLabel(t)):i.domSelect.style.width="100%",r.appendChild(i.domSelect),i._setDomContainer(r),i}},{key:"addSlider",value:function(t,e,n,o,i,r){var a=new bt(e,n,o,i,r),u=this._addLine();return t&&u.appendChild(this._createLabel(t)),u.appendChild(a.domInputText),u.appendChild(a.domSlider),a._setDomContainer(u),a}},{key:"addColor",value:function(t,e,n){var o=new ht(e,n),i=this._addLine();return t?i.appendChild(this._createLabel(t)):o.domColor.style.width="100%",i.appendChild(o.domColor),o._setDomContainer(i),o}},{key:"addButton",value:function(t,e,n){var o=new lt(t,e,n),i=this._addLine();return i.appendChild(o.domButton),o._setDomContainer(i),o}},{key:"addDualButton",value:function(t,e,n,o,i,r){var a=new lt(t,n,i),u=new lt(e,o,r),l=this._addLine();l.appendChild(u.domButton),l.appendChild(a.domButton);var s=a.domButton.style,c=u.domButton.style;return s.width=c.width="49%",s.marginRight=c.marginLeft="1%",a._setDomContainer(l),u._setDomContainer(l),[a,u]}},{key:"setVisibility",value:function(t){this.domContainer&&(this.domContainer.hidden=!t)}}]),t}(),vt=function(t){function e(t){var n;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),(n=function(t,e){return!e||"object"!==A(e)&&"function"!=typeof e?B(t):e}(this,V(e).call(this))).domUl=document.createElement("ul"),n.domUl.setAttribute("opened",!0);var o=document.createElement("label");return o.innerHTML=t||"",o.addEventListener("mousedown",n._onMouseDown.bind(B(n))),n.domUl.appendChild(o),n.isOpen=!0,n}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&H(t,e)}(e,yt),function(t,e,n){e&&L(t.prototype,e)}(e,[{key:"_onMouseDown",value:function(){this.isOpen=!this.isOpen,this.domUl.setAttribute("opened",this.isOpen)}},{key:"open",value:function(){this.isOpen=!0,this.domUl.setAttribute("opened",!0)}},{key:"close",value:function(){this.isOpen=!1,this.domUl.setAttribute("opened",!1)}},{key:"setVisibility",value:function(t){t?this.isOpen&&this.domUl.setAttribute("opened",!0):this.domUl.setAttribute("opened",!1),this.domUl.style.height=t?"auto":"0px"}}]),e}(),gt=function(){function t(e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.domSidebar=document.createElement("div"),this.domSidebar.className="gui-sidebar",this.domResize=document.createElement("div"),this.domResize.className="gui-resize",this.isDragging=!1,this.mouseX=0,this.domResize.addEventListener("mousedown",this._onMouseDown.bind(this)),window.addEventListener("mousemove",this._onMouseMove.bind(this)),window.addEventListener("mouseup",this._onMouseUp.bind(this)),this.callbackResize=e,this.isOnTheRight=!1}return function(t,e,n){e&&D(t.prototype,e)}(t,[{key:"_setTop",value:function(t){this.domSidebar.style.top=this.domResize.style.top=t+"px"}},{key:"_onTheRight",value:function(){this.isOnTheRight=!1,this.domSidebar.style.left=1,this.domSidebar.style.borderRight=1,this.domSidebar.style.borderLeft=1,this.domSidebar.style.borderColor="rgba(255,255,255,0.3)",this.domResize.style.left=0,this.domResize.style.right=this.domSidebar.offsetWidth+"px",this.domResize.style.marginRight="-3px"}},{key:"_onMouseDown",value:function(t){this.isDragging=!0,this.mouseX=t.clientX}},{key:"_updateViewportPosition",value:function(t){var e=this.domSidebar.hidden?0:this.domSidebar.offsetWidth;this.isOnTheRight?t.style.width=t.clientWidth-e+"px":(t.style.left=this.domSidebar.offsetLeft+e+"px",t.style.width=t.clientWidth-e+"px")}},{key:"_onMouseMove",value:function(t){if(!1!==this.isDragging){var e=t.clientX,n=e-this.mouseX;this.isOnTheRight&&(n=-n);var o=Math.max(50,this.domSidebar.offsetWidth+n)+"px";this.domSidebar.style.width=o,this.isOnTheRight?this.domResize.style.right=this.domSidebar.offsetWidth+"px":this.domResize.style.left=o,this.mouseX=e,this.callbackResize()}}},{key:"_onMouseUp",value:function(){this.isDragging=!1}},{key:"addMenu",value:function(t){var e=new vt(t);return this.domSidebar.appendChild(e.domUl),e}},{key:"setVisibility",value:function(t){this.domSidebar.hidden=!t,this.domResize.hidden=!t,this.callbackResize()}}]),t}(),_t=function(t){function e(t,n,o){var i;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),i=function(t,e){return!e||"object"!==I(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}(this,z(e).call(this));var r=t;return r&&"function"!=typeof r?r=t[n].bind(t):o=n,i.domSpan=document.createElement("span"),i.domSpan.className="shortcut",i.domSpan.innerHTML=o||"",i.setCallback(r),i}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&W(t,e)}(e,ut),function(t,e,n){e&&U(t.prototype,e)}(e,[{key:"_setDomContainer",value:function(t){this.domContainer=t,t.addEventListener("click",this._onClick.bind(this))}},{key:"_onClick",value:function(){this.callback&&this.callback()}}]),e}(),wt=function(t){function e(){var t;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),(t=function(t,e){return!e||"object"!==N(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}(this,F(e).call(this))).domUl=document.createElement("ul"),t}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&X(t,e)}(e,yt),function(t,e,n){e&&K(t.prototype,e)}(e,[{key:"addButton",value:function(t,e,n,o){var i=new _t(e,n,o),r=this._addLine(t);return r.appendChild(i.domSpan),i._setDomContainer(r),i}},{key:"addSlider",value:function(t,n,o,i,r,a){var u=G(F(e.prototype),"addSlider",this).call(this,t,n,o,i,r,a);return u.domInputText.style.width="18%",u.domSlider.style.width=t?"44%":"80%",u}}]),e}(),kt={refRules:{}},Ct=function(t,e,n){var o=function(){if(at)return at;for(var t=document.styleSheets,e=0,n=t.length;e<n;++e){var o=t[e].href;if(o&&-1!==o.indexOf("yagui.css"))return at=t[e]}}();if(o){var i=o.cssRules||o.rules,r=kt.refRules[t];if(!r){var a=0,u=i.length;for(a=0;a<u&&i[a].selectorText!==t;++a);if(a===u)return!1;r=kt.refRules[t]=i[a]}r&&(r.style[e]=n)}};kt.changeWidgetsColor=function(t){var e=dt.getStrColor(t);Ct(".gui-button","background",e),Ct(".gui-select","background",e),Ct(".gui-slider > div","background",e),kt._curWidgetColor=t},kt.changeDisplayBoorder=function(t){var e=t?"1px solid #000":"0";Ct(".gui-button","border",e),Ct(".gui-select","border",e),Ct(".gui-slider","border",e),Ct(".gui-input-number","border",e),Ct(".gui-sidebar > ul > label","borderTop",e),Ct(".gui-sidebar > ul > label","borderBottom",e),Ct(".gui-sidebar","borderLeft",e),Ct(".gui-sidebar","borderRight",e),Ct(".gui-topbar","borderBottom",e),kt._curShowBorder=t},kt.changeBackgroundColor=function(t){Ct(".gui-sidebar","background",dt.getStrColor(t));var e=dt.getStrColor(dt.getColorMult(t,.5));Ct(".gui-topbar","background",e),Ct(".gui-topbar ul > li > ul","background",e),kt._curBackgroundColor=t},kt.changeTextColor=function(t){var e=dt.getStrColor(t);Ct("*","color",e),Ct(".gui-sidebar > ul > label","color",e),kt._curTextColor=t},kt.changeOverallColor=function(t){kt.changeWidgetsColor(t);var e=dt.getColorMult(t,.5);e.length=3,kt.changeBackgroundColor(e);for(var n=dt.getColorAdd(t,.5),o=0;o<3;++o)n[o]=Math.min(.8,n[o]);kt.changeTextColor(n),kt._curWidgetColor=t,kt._curBackgroundColor=e,kt._curTextColor=n},kt._curTextColor=[.73,.73,.73,1],kt._curWidgetColor=[.17,.01,.34,1],kt._curShowBorder=!1;var St=kt,Ot=function(t){function e(t,n,o){var i;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),i=function(t,e){return!e||"object"!==Y(e)&&"function"!=typeof e?Q(t):e}(this,J(e).call(this));var r=o?n[o].bind(n):n;return i.domButton=document.createElement("button"),i.domButton.className="gui-undobutton",i.domButton.innerHTML="",i.domButton.addEventListener("click",i._onClick.bind(Q(i))),i.setCallback(r),i}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&q(t,e)}(e,ut),function(t,e,n){e&&Z(t.prototype,e)}(e,[{key:"setEnable",value:function(t){this.domButton.disabled=void 0!==t&&!t}},{key:"_onClick",value:function(){this.callback&&this.callback()}}]),e}(),xt=function(t){function e(t,n,o){var i;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),i=function(t,e){return!e||"object"!==$(e)&&"function"!=typeof e?nt(t):e}(this,et(e).call(this));var r=o?n[o].bind(n):n;return i.domButton=document.createElement("button"),i.domButton.className="gui-redobutton",i.domButton.innerHTML="",i.domButton.addEventListener("click",i._onClick.bind(nt(i))),i.setCallback(r),i}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&ot(t,e)}(e,ut),function(t,e,n){e&&tt(t.prototype,e)}(e,[{key:"setEnable",value:function(t){this.domButton.disabled=void 0!==t&&!t}},{key:"_onClick",value:function(){this.callback&&this.callback()}}]),e}(),Tt=function(){function t(e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.domTopbar=document.createElement("div"),this.domTopbar.className="gui-topbar",this.domUl=document.createElement("ul"),this.domTopbar.appendChild(this.domUl),this.callbackResize=e,this.uiExtra={}}return function(t,e,n){e&&it(t.prototype,e)}(t,[{key:"_addLine",value:function(t){var e=document.createElement("li");return e.innerHTML=t||"",this.domUl.appendChild(e),e}},{key:"_updateViewportPosition",value:function(t){var e=this.domTopbar.hidden?0:this.domTopbar.offsetHeight;t.style.top=e+"px",t.style.height=t.clientHeight-e+"px"}},{key:"_onChangeColor",value:function(t,e){t(e),this.uiExtra.overallColor.setValue(St._curWidgetColor,!0),this.uiExtra.widgetColor.setValue(St._curWidgetColor,!0),this.uiExtra.backColor.setValue(St._curBackgroundColor,!0),this.uiExtra.textColor.setValue(St._curTextColor,!0)}},{key:"addMenu",value:function(t){var e=new wt,n=document.createElement("li");return n.setAttribute("onclick","void(0)"),n.innerHTML=t||"",this.domUl.appendChild(n),n.appendChild(e.domUl),e._setDomContainer(n),e}},{key:"addUndoButton",value:function(t,e,n){var o=new Ot(t,e,n),i=this._addLine();return i.appendChild(o.domButton),o._setDomContainer(i),o}},{key:"addRedoButton",value:function(t,e,n){var o=new xt(t,e,n),i=this._addLine();return i.appendChild(o.domButton),o._setDomContainer(i),o}},{key:"addExtra",value:function(){var t=this._onChangeColor,e=this.addMenu("Extra UI"),n=this.uiExtra;return e.addTitle("Overall"),n.overallColor=e.addColor("",St._curWidgetColor,t.bind(this,St.changeOverallColor)),e.addTitle("Advanced"),n.widgetColor=e.addColor("Widget",St._curWidgetColor,t.bind(this,St.changeWidgetsColor)),n.backColor=e.addColor("Back",St._curBackgroundColor,t.bind(this,St.changeBackgroundColor)),n.textColor=e.addColor("Text",St._curTextColor,t.bind(this,St.changeTextColor)),n.showBorder=e.addCheckbox("Border",St._curShowBorder,St.changeDisplayBoorder),e}},{key:"setVisibility",value:function(t){this.domTopbar.hidden=!t,this.callbackResize()}}]),t}(),Et=function(){function t(e,n,o){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.domMain=document.createElement("div"),this.viewport=e,this.callbackResize=n,this.viewport&&(this.viewport.style.width=document.documentElement.clientWidth+"px",this.viewport.style.height=document.documentElement.clientHeight+"px"),this.cbResize_=this._onWindowResize.bind(this),o?o.appendChild(this.domMain):document.body.appendChild(this.domMain),this.leftSidebar=void 0,this.rightSidebar=void 0,this.topbar=void 0,window.addEventListener("resize",this._onWindowResize.bind(this),!1)}return function(t,e,n){e&&rt(t.prototype,e)}(t,[{key:"_onWindowResize",value:function(){this.viewport&&(this.viewport.style.width=document.documentElement.clientWidth+"px",this.viewport.style.height=document.documentElement.clientHeight+"px",this.viewport.style.left="0px",this.viewport.style.top="0px",this.leftSidebar&&this.leftSidebar._updateViewportPosition(this.viewport),this.rightSidebar&&this.rightSidebar._updateViewportPosition(this.viewport),this.topbar&&this.topbar._updateViewportPosition(this.viewport)),this._updateSidebarsPosition(),this.callbackResize&&this.callbackResize()}},{key:"_updateSidebarsPosition",value:function(){if(this.topbar){var t=this.topbar.domTopbar.offsetHeight;this.leftSidebar&&this.leftSidebar._setTop(t),this.rightSidebar&&this.rightSidebar._setTop(t)}}},{key:"addLeftSidebar",value:function(){this.leftSidebar=new gt(this.cbResize_);var t=this.leftSidebar.domSidebar;return this.domMain.appendChild(t),this.domMain.appendChild(this.leftSidebar.domResize),this._updateSidebarsPosition(),this.leftSidebar._updateViewportPosition(this.viewport),this.leftSidebar}},{key:"addRightSidebar",value:function(){this.rightSidebar=new gt(this.cbResize_);var t=this.rightSidebar.domSidebar;return this.domMain.appendChild(t),this.domMain.appendChild(this.rightSidebar.domResize),this.rightSidebar._onTheRight(),this._updateSidebarsPosition(),this.rightSidebar._updateViewportPosition(this.viewport),this.rightSidebar}},{key:"addTopbar",value:function(){return this.topbar=new Tt(this.cbResize_),this.domMain.appendChild(this.topbar.domTopbar),this._updateSidebarsPosition(),this.topbar._updateViewportPosition(this.viewport),this.topbar}},{key:"setVisibility",value:function(t){this.domMain.hidden=!t,this._onWindowResize()}}]),t}();e.default=Et}])}));