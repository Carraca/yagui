!function(t,e){"object"==typeof exports&&"object"==typeof module?module.exports=e():"function"==typeof define&&define.amd?define([],e):"object"==typeof exports?exports.yagui=e():t.yagui=e()}(window,(function(){return function(t){function e(n){if(o[n])return o[n].exports;var i=o[n]={i:n,l:!1,exports:{}};return t[n].call(i.exports,i,i.exports,e),i.l=!0,i.exports}var o={};return e.m=t,e.c=o,e.d=function(t,o,n){e.o(t,o)||Object.defineProperty(t,o,{enumerable:!0,get:n})},e.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},e.t=function(t,o){if(1&o&&(t=e(t)),8&o)return t;if(4&o&&"object"==typeof t&&t&&t.__esModule)return t;var n=Object.create(null);if(e.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:t}),2&o&&"string"!=typeof t)for(var i in t)e.d(n,i,function(e){return t[e]}.bind(null,i));return n},e.n=function(t){var o=t&&t.__esModule?function(){return t.default}:function(){return t};return e.d(o,"a",o),o},e.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},e.p="",e(e.s=0)}([function(t,e,o){var n={GuiMain:o(1).default};t.exports=n},function(t,e,o){"use strict";function n(t,e){for(var o=0;o<e.length;o++){var n=e[o];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function i(t){return(i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function r(t,e){for(var o=0;o<e.length;o++){var n=e[o];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function a(t){return(a=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function u(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function l(t,e){return(l=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function s(t){return(s="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function c(t,e){for(var o=0;o<e.length;o++){var n=e[o];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function d(t){return(d=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function f(t,e){return(f=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function h(t){return(h="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function p(t,e){for(var o=0;o<e.length;o++){var n=e[o];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function b(t){return(b=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function m(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function y(t,e){return(y=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function v(t){return(v="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function g(t,e){for(var o=0;o<e.length;o++){var n=e[o];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function _(t){return(_=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function w(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function k(t,e){return(k=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function C(t){return(C="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function S(t,e){for(var o=0;o<e.length;o++){var n=e[o];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function O(t){return(O=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function T(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function x(t,e){return(x=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function E(t){return(E="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function M(t,e){for(var o=0;o<e.length;o++){var n=e[o];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function P(t){return(P=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function j(t,e){return(j=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function A(t,e){for(var o=0;o<e.length;o++){var n=e[o];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function R(t){return(R="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function L(t,e){for(var o=0;o<e.length;o++){var n=e[o];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function V(t){return(V=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function B(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function H(t,e){return(H=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function D(t,e){for(var o=0;o<e.length;o++){var n=e[o];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function I(t){return(I="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function U(t,e){for(var o=0;o<e.length;o++){var n=e[o];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function z(t){return(z=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function W(t,e){return(W=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function N(t){return(N="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function G(t,e){for(var o=0;o<e.length;o++){var n=e[o];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function K(t,e,o){return(K="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(t,e,o){var n=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=F(t)););return t}(t,e);if(n){var i=Object.getOwnPropertyDescriptor(n,e);return i.get?i.get.call(o):i.value}})(t,e,o||t)}function F(t){return(F=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function Y(t,e){return(Y=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function X(t){return(X="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function Z(t,e){for(var o=0;o<e.length;o++){var n=e[o];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function J(t){return(J=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function Q(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function q(t,e){return(q=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function $(t){return($="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function tt(t,e){for(var o=0;o<e.length;o++){var n=e[o];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function et(t){return(et=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function ot(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function nt(t,e){return(nt=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function it(t,e){for(var o=0;o<e.length;o++){var n=e[o];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function rt(t,e){for(var o=0;o<e.length;o++){var n=e[o];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}o.r(e);var at,ut=function(){function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t)}return function(t,e,o){e&&n(t.prototype,e)}(t,[{key:"_getInitialValue",value:function(t,e){return"string"!=typeof e?t:t[e]}},{key:"_getCheckCallback",value:function(t,e){return"string"!=typeof e?e:function(o){t[e]=o}}},{key:"_setDomContainer",value:function(t){this.domContainer=t}},{key:"setCallback",value:function(t){this.callback=t}},{key:"setVisibility",value:function(t){this.domContainer&&(this.domContainer.hidden=!t)}}]),t}(),lt=function(t){function e(t,o,n){var r;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),r=function(t,e){return!e||"object"!==i(e)&&"function"!=typeof e?u(t):e}(this,a(e).call(this));var l=n?o[n].bind(o):o;return r.domButton=document.createElement("button"),r.domButton.className="gui-button",r.domButton.innerHTML=t||"",r.domButton.addEventListener("click",r._onClick.bind(u(r))),r.setCallback(l),r}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&l(t,e)}(e,ut),function(t,e,o){e&&r(t.prototype,e)}(e,[{key:"setEnable",value:function(t){this.domButton.disabled=void 0!==t&&!t}},{key:"_onClick",value:function(){this.callback&&this.callback()}}]),e}(),st=function(t){function e(t,o){var n;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e);var i=(n=function(t,e){return!e||"object"!==s(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}(this,d(e).call(this)))._getInitialValue(t,o),r=n._getCheckCallback(t,o);return n.domCheckbox=document.createElement("input"),n.domCheckbox.className="gui-input-checkbox",n.domCheckbox.type="checkbox",n.domLabelCheckbox=document.createElement("label"),n.setValue(void 0===i||i),n.setCallback(r),n}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&f(t,e)}(e,ut),function(t,e,o){e&&c(t.prototype,e)}(e,[{key:"_onMouseDown",value:function(){this.setValue(!this.domCheckbox.checked)}},{key:"setValue",value:function(t,e){this.domCheckbox.checked=t,!e&&this.callback&&this.callback(t)}},{key:"getValue",value:function(){return this.domCheckbox.checked}}]),e}(),ct={rgbToHsv:function(t){var e=t[0],o=t[1],n=t[2],i=Math.max(e,o,n),r=Math.min(e,o,n);return r===i?[0,0,r]:[((e===r?3:n===r?1:5)-(e===r?o-n:n===r?e-o:n-e)/(i-r))/6,(i-r)/i,i]},hsvToRgb:function(t){var e=6*t[0],o=t[1],n=t[2],i=Math.floor(e),r=e-i,a=n*(1-o),u=n*(1-r*o),l=n*(1-(1-r)*o),s=i%6;return 0===s?[n,l,a]:1===s?[u,n,a]:2===s?[a,n,l]:3===s?[a,u,n]:4===s?[l,a,n]:[n,a,u]},getValidColor:function(t){for(var e=0,o=t.length;e<o;++e)t[e]=Math.max(0,Math.min(1,t[e]));return t},getStrColor:function(t){return 3===t.length?ct.rgbToHex(t):"rgba("+Math.round(255*t[0])+","+Math.round(255*t[1])+","+Math.round(255*t[2])+","+t[3]+")"},getColorMult:function(t,e){var o=[t[0]*e,t[1]*e,t[2]*e];return 4===t.length&&o.push(t[3]),ct.getValidColor(o)},getColorAdd:function(t,e){var o=[t[0]+e,t[1]+e,t[2]+e];return 4===t.length&&o.push(t[3]),ct.getValidColor(o)},rgbToHex:function(t){for(var e="#",o=0;o<3;++o){var n=Math.round(255*t[o]).toString(16);e+=1===n.length?"0"+n:n}return e},hexToRgb:function(t){var e=0;"#"===t[0]&&(t=t.slice(1));var o=t;if(t.length>6)o=t.slice(0,6);else if(t.length<6)for(o="",e=0;e<3;++e)o+=t[e]?t[e]+t[e]:"00";var n=[0,0,0];for(e=0;e<3;++e){var i=parseInt(o[2*e]+o[2*e+1],16);n[e]=(i!=i?0:i)/255}return n}},dt=ct,ft=["-moz-","-o-","-webkit-","-ms-",""],ht=function(t){function e(t,o){var n;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e);var i=(n=function(t,e){return!e||"object"!==h(e)&&"function"!=typeof e?m(t):e}(this,b(e).call(this)))._getInitialValue(t,o),r=n._getCheckCallback(t,o);n.color=i?dt.getValidColor(i.slice()):[1,0,0],n.domColor=document.createElement("div"),n.domColor.className="gui-widget-color",n.domInputColor=document.createElement("input"),n.domPopup=document.createElement("div"),n.domHue=document.createElement("div"),n.domHue.className="gui-color-hue",n.domHueKnob=document.createElement("div"),n.domHueKnob.className="gui-knob-hue",n.domSaturation=document.createElement("div"),n.domSaturation.className="gui-color-saturation";var a=document.createElement("div");return n.domSaturation.appendChild(a),n.domSaturationKnob=document.createElement("div"),n.domSaturationKnob.className="gui-knob-saturation",n.domHue.appendChild(n.domHueKnob),n.domPopup.appendChild(n.domSaturationKnob),n.domPopup.appendChild(n.domSaturation),n.domPopup.appendChild(n.domHue),n.domColor.appendChild(n.domInputColor),n.domColor.appendChild(n.domPopup),n._hueGradient(n.domHue),n._linearGradient(a,"top","rgba(0,0,0,0)","#000"),n.domColor.addEventListener("keydown",n._onInputDown.bind(m(n))),n.domSaturation.addEventListener("mousedown",n._onSaturationDown.bind(m(n))),n.domHue.addEventListener("mousedown",n._onHueDown.bind(m(n))),window.addEventListener("mouseup",n._onMouseUp.bind(m(n))),window.addEventListener("mouseout",n._onMouseUp.bind(m(n))),window.addEventListener("mousemove",n._onMouseMove.bind(m(n))),n.hasAlpha=4===n.color.length,n.alpha=1,n.hasAlpha&&(n.domPopup.style.width="142px",n.domAlpha=document.createElement("div"),n.domAlpha.className="gui-color-alpha",n.domAlphaKnob=document.createElement("div"),n.domAlphaKnob.className="gui-knob-alpha",n._alphaGradient(n.domAlpha,"top","rgba(0,0,0,1.0)","rgba(0,0,0,0.0)"),n.domAlpha.addEventListener("mousedown",n._onAlphaDown.bind(m(n))),n.domAlpha.appendChild(n.domAlphaKnob),n.domPopup.appendChild(n.domAlpha)),n.editHue=n.editSaturation=n.editAlpha=!1,n.widgetHeight=n.widgetWidth=100,n.setValue(n.color),n.setCallback(r),n}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&y(t,e)}(e,ut),function(t,e,o){e&&p(t.prototype,e)}(e,[{key:"_onInputDown",value:function(t){t.stopPropagation(),13===t.keyCode&&this.setValue(dt.hexToRgb(t.target.value))}},{key:"_onUpdateSaturation",value:function(t){var e=this.domSaturation.getBoundingClientRect(),o=dt.rgbToHsv(this.getValue());o[1]=Math.min(1,Math.max(0,(t.clientX-e.left)/e.width)),o[2]=Math.min(1,Math.max(0,1-(t.clientY-e.top)/e.width)),this.setValue(dt.hsvToRgb(o),!1,!0),this._updateGui()}},{key:"_onUpdateHue",value:function(t){var e=this.domHue.getBoundingClientRect(),o=dt.rgbToHsv(this.getValue());o[0]=Math.min(1,Math.max(0,1-(t.clientY-e.top)/e.height)),this.setValue(dt.hsvToRgb(o),!1,!0),this._updateGui()}},{key:"_onUpdateAlpha",value:function(t){var e=this.domAlpha.getBoundingClientRect(),o=this.getValue();o[3]=this.alpha=Math.min(1,Math.max(0,1-(t.clientY-e.top)/e.height)),this.setValue(o,!1,!0),this._updateGui()}},{key:"_updateGui",value:function(){var t=this.getValue(),e=dt.rgbToHsv(t);this.domSaturationKnob.style.marginLeft=this.widgetWidth*e[1]-7+"px",this.domSaturationKnob.style.marginTop=this.widgetHeight*(1-e[2])-7+"px",e[1]=e[2]=1,this._linearGradient(this.domSaturation,"left","#fff",dt.getStrColor(dt.hsvToRgb(e))),this.domHueKnob.style.marginTop=(1-e[0])*this.widgetHeight+"px",this.hasAlpha&&void 0!==t[3]&&(this.domAlphaKnob.style.marginTop=(1-this.alpha)*this.widgetHeight+"px")}},{key:"_onMouseMove",value:function(t){if(this.editSaturation||this.editHue||this.editAlpha)return this.editSaturation?this._onUpdateSaturation(t):this.editHue?this._onUpdateHue(t):this.editAlpha?this._onUpdateAlpha(t):void 0}},{key:"_onSaturationDown",value:function(t){this.editSaturation=!0,this._onMouseMove(t)}},{key:"_onHueDown",value:function(t){this.editHue=!0,this._onMouseMove(t)}},{key:"_onAlphaDown",value:function(t){this.editAlpha=!0,this._onMouseMove(t)}},{key:"_onMouseUp",value:function(){this.editHue=this.editSaturation=this.editAlpha=!1}},{key:"_hueGradient",value:function(t){t.style.background="";for(var e=0,o=ft.length;e<o;++e)t.style.cssText+="background: "+ft[e]+"linear-gradient(top,  #ff0000 0%, #ff00ff 17%, #0000ff 34%, #00ffff 50%, #00ff00 67%, #ffff00 84%, #ff0000 100%);"}},{key:"_alphaGradient",value:function(t,e,o,n){t.style.background="";for(var i=0,r=ft.length;i<r;++i)t.style.cssText+="background: "+ft[i]+"linear-gradient("+e+", "+o+","+n+'),url("data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAgAAAAICAIAAABLbSncAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAChJREFUeNpiPHPmDAMMGBsbw9lMDDgA6RKM%2F%2F%2F%2Fh3POnj1LCzsAAgwAQtYIcFfEyzkAAAAASUVORK5CYII%3D");'}},{key:"_linearGradient",value:function(t,e,o,n){t.style.background="";for(var i=0,r=ft.length;i<r;++i)t.style.cssText+="background: "+ft[i]+"linear-gradient("+e+", "+o+" 0%, "+n+" 100%);"}},{key:"setValue",value:function(t,e,o){for(var n=this.color,i=0,r=t.length;i<r;++i)n[i]=t[i];var a=dt.rgbToHex(t);if(this.domInputColor.value=a,this.hasAlpha){t.length>=4?this.alpha=t[3]:t.push(this.alpha);var u="rgba("+parseInt(255*t[0],10)+","+parseInt(255*t[1],10)+","+parseInt(255*t[2],10)+","+this.alpha+")";this._alphaGradient(this.domInputColor,"0deg",u,u)}else this.domInputColor.style.background=a;var l=dt.rgbToHsv(t);this.domSaturationKnob.style.borderColor=l[2]<.5||l[1]>.5?"#fff":"#000",this.domInputColor.style.color=this.alpha>.2&&(l[2]<.5||l[1]>.5)?"#fff":"#000",o||this._updateGui(),!e&&this.callback&&this.callback(t)}},{key:"getValue",value:function(){return this.color}}]),e}(),pt=function(t){function e(t,o,n){var i;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e);var r=(i=function(t,e){return!e||"object"!==v(e)&&"function"!=typeof e?w(t):e}(this,_(e).call(this)))._getInitialValue(t,o),a=i._getCheckCallback(t,o);return n=n||{},r=void 0!==r?r:n[0],i.isArray=void 0!==n.length,i.domSelect=document.createElement("select"),i.domSelect.className="gui-select",i.addOptions(n),i.domSelect.addEventListener("change",i._onChange.bind(w(i))),i.setValue(r),i.setCallback(a),i}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&k(t,e)}(e,ut),function(t,e,o){e&&g(t.prototype,e)}(e,[{key:"_parseValue",value:function(t){return this.isArray?parseInt(t,10):t}},{key:"_onChange",value:function(t){this.setValue(t.target.value)}},{key:"addOptions",value:function(t){for(var e=Object.keys(t),o=0;o<e.length;++o){var n=document.createElement("option");n.innerHTML=t[e[o]],n.value=e[o],this.domSelect.appendChild(n)}}},{key:"setValue",value:function(t,e){this.domSelect.value=t,!e&&this.callback&&this.callback(this._parseValue(t))}},{key:"getValue",value:function(){return this._parseValue(this.domSelect.value)}}]),e}(),bt=function(t){function e(t,o,n,i,r){var a;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e);var u=(a=function(t,e){return!e||"object"!==C(e)&&"function"!=typeof e?T(t):e}(this,O(e).call(this)))._getInitialValue(t,o),l=a._getCheckCallback(t,o);return u=void 0!==u?u:100,n=void 0!==n?n:0,i=void 0!==i?i:200,r=void 0!==r?r:1,a.domSlider=document.createElement("div"),a.domSlider.className="gui-slider",a.domSliderFill=document.createElement("div"),a.domSlider.appendChild(a.domSliderFill),a.domInputText=document.createElement("input"),a.domInputText.className="gui-input-number",a.domInputText.type="number",a.min=a.domInputText.min=n,a.max=a.domInputText.max=i,a.step=a.domInputText.step=r,a.domInputText.addEventListener("keydown",a._onKeyDown.bind(T(a))),a.domInputText.addEventListener("change",a._onInputText.bind(T(a))),a.domInputText.addEventListener("blur",a._onInputText.bind(T(a))),a.domSlider.addEventListener("mousedown",a._onMouseDown.bind(T(a))),window.addEventListener("mouseup",a._onMouseUp.bind(T(a)),!0),window.addEventListener("mousemove",a._onMouseMove.bind(T(a))),a.lastValue=u,a.isDown=!1,a.setValue(u),a.setCallback(l),a}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&x(t,e)}(e,ut),function(t,e,o){e&&S(t.prototype,e)}(e,[{key:"_onInputText",value:function(t){var e=parseFloat(t.target.value);e==e&&e!==this.lastValue&&this.setValue(e)}},{key:"_onKeyDown",value:function(t){t.stopPropagation(),13===t.which&&this.domInputText.blur()}},{key:"_onMouseMove",value:function(t){if(t.preventDefault(),this.isDown){var e=this.domSlider.getBoundingClientRect(),o=this.min+(this.max-this.min)*((t.clientX-e.left)/e.width);this.setValue(o)}}},{key:"_onMouseDown",value:function(t){this.isDown=!0,this._onMouseMove(t)}},{key:"_onMouseUp",value:function(){this.isDown=!1}},{key:"_setDomContainer",value:function(t){this.domContainer=t}},{key:"getValue",value:function(){return parseFloat(this.domInputText.value)}},{key:"setValue",value:function(t,e){this.lastValue=t,t=Math.max(Math.min(t,this.max),this.min),t=Math.round(t/this.step)*this.step,this.domInputText.value=t;var o=this.min;this.max!==this.min&&(o=(t-this.min)/(this.max-this.min)),this.domSliderFill.style.width=100*o+"%",!e&&this.callback&&this.callback(t)}},{key:"setMax",value:function(t){return this.domInputText.max=this.max=t,this}},{key:"setMin",value:function(t){return this.min=t,this}}]),e}(),mt=function(t){function e(t){var o;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),(o=function(t,e){return!e||"object"!==E(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}(this,P(e).call(this))).domText=document.createElement("div"),o.domText.innerHTML=t||"",o.domText.className="group-title",o}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&j(t,e)}(e,ut),function(t,e,o){e&&M(t.prototype,e)}(e,[{key:"setText",value:function(t){this.domText.innerHTML=t}},{key:"setVisibility",value:function(t){this.domText.hidden=!t}}]),e}(),yt=function(){function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t)}return function(t,e,o){e&&A(t.prototype,e)}(t,[{key:"_addLine",value:function(t){var e=document.createElement("li");return e.innerHTML=t||"",this.domUl.appendChild(e),e}},{key:"_createLabel",value:function(t){var e=document.createElement("label");return e.className="gui-label-side",e.innerHTML=t||"",e}},{key:"_setDomContainer",value:function(t){this.domContainer=t}},{key:"addTitle",value:function(t){var e=new mt(t);return this.domUl.appendChild(e.domText),e}},{key:"addCheckbox",value:function(t,e,o){var n=new st(e,o),i=this._addLine();i.className+=" gui-pointerOnHover gui-glowOnHover";var r=this._createLabel(t);return r.style.overflow="visible",r.className+=" gui-pointerOnHover",i.appendChild(r),i.appendChild(n.domCheckbox),i.appendChild(n.domLabelCheckbox),i.addEventListener("mousedown",n._onMouseDown.bind(n)),n._setDomContainer(i),n}},{key:"addCombobox",value:function(t,e,o,n){var i=new pt(e,o,n),r=this._addLine();return t?r.appendChild(this._createLabel(t)):i.domSelect.style.width="100%",r.appendChild(i.domSelect),i._setDomContainer(r),i}},{key:"addSlider",value:function(t,e,o,n,i,r){var a=new bt(e,o,n,i,r),u=this._addLine();return t&&u.appendChild(this._createLabel(t)),u.appendChild(a.domInputText),u.appendChild(a.domSlider),a._setDomContainer(u),a}},{key:"addColor",value:function(t,e,o){var n=new ht(e,o),i=this._addLine();return t?i.appendChild(this._createLabel(t)):n.domColor.style.width="100%",i.appendChild(n.domColor),n._setDomContainer(i),n}},{key:"addButton",value:function(t,e,o){var n=new lt(t,e,o),i=this._addLine();return i.appendChild(n.domButton),n._setDomContainer(i),n}},{key:"addDualButton",value:function(t,e,o,n,i,r){var a=new lt(t,o,i),u=new lt(e,n,r),l=this._addLine();l.appendChild(u.domButton),l.appendChild(a.domButton);var s=a.domButton.style,c=u.domButton.style;return s.width=c.width="49%",s.marginRight=c.marginLeft="1%",a._setDomContainer(l),u._setDomContainer(l),[a,u]}},{key:"setVisibility",value:function(t){this.domContainer&&(this.domContainer.hidden=!t)}}]),t}(),vt=function(t){function e(t){var o;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),(o=function(t,e){return!e||"object"!==R(e)&&"function"!=typeof e?B(t):e}(this,V(e).call(this))).domUl=document.createElement("ul"),o.domUl.setAttribute("opened",!0);var n=document.createElement("label");return n.innerHTML=t||"",n.addEventListener("mousedown",o._onMouseDown.bind(B(o))),o.domUl.appendChild(n),o.isOpen=!0,o}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&H(t,e)}(e,yt),function(t,e,o){e&&L(t.prototype,e)}(e,[{key:"_onMouseDown",value:function(){this.isOpen=!this.isOpen,this.domUl.setAttribute("opened",this.isOpen)}},{key:"open",value:function(){this.isOpen=!0,this.domUl.setAttribute("opened",!0)}},{key:"close",value:function(){this.isOpen=!1,this.domUl.setAttribute("opened",!1)}},{key:"setVisibility",value:function(t){t?this.isOpen&&this.domUl.setAttribute("opened",!0):this.domUl.setAttribute("opened",!1),this.domUl.style.height=t?"auto":"0px"}}]),e}(),gt=function(){function t(e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.domSidebar=document.createElement("div"),this.domSidebar.className="gui-sidebar",this.domResize=document.createElement("div"),this.domResize.className="gui-resize",this.isDragging=!1,this.mouseX=0,this.domResize.addEventListener("mousedown",this._onMouseDown.bind(this)),window.addEventListener("mousemove",this._onMouseMove.bind(this)),window.addEventListener("mouseup",this._onMouseUp.bind(this)),this.callbackResize=e,this.isOnTheRight=!1}return function(t,e,o){e&&D(t.prototype,e)}(t,[{key:"_setTop",value:function(t){this.domSidebar.style.top=this.domResize.style.top=t+"px"}},{key:"_onTheRight",value:function(){this.isOnTheRight=!1,this.domSidebar.style.left=1,this.domSidebar.style.borderRight=1,this.domSidebar.style.borderLeft=1,this.domSidebar.style.borderColor="rgba(255,255,255,0.3)",this.domResize.style.left=0,this.domResize.style.right=this.domSidebar.offsetWidth+"px",this.domResize.style.marginRight="-3px"}},{key:"_onMouseDown",value:function(t){this.isDragging=!0,this.mouseX=t.clientX}},{key:"_updateViewportPosition",value:function(t){var e=this.domSidebar.hidden?0:this.domSidebar.offsetWidth;this.isOnTheRight?t.style.width=t.clientWidth-e+"px":(t.style.left=this.domSidebar.offsetLeft+e+"px",t.style.width=t.clientWidth-e+"px")}},{key:"_onMouseMove",value:function(t){if(!1!==this.isDragging){var e=t.clientX,o=e-this.mouseX;this.isOnTheRight&&(o=-o);var n=Math.max(50,this.domSidebar.offsetWidth+o)+"px";this.domSidebar.style.width=n,this.isOnTheRight?this.domResize.style.right=this.domSidebar.offsetWidth+"px":this.domResize.style.left=n,this.mouseX=e,this.callbackResize()}}},{key:"_onMouseUp",value:function(){this.isDragging=!1}},{key:"addMenu",value:function(t){var e=new vt(t);return this.domSidebar.appendChild(e.domUl),e}},{key:"setVisibility",value:function(t){this.domSidebar.hidden=!t,this.domResize.hidden=!t,this.callbackResize()}}]),t}(),_t=function(t){function e(t,o,n){var i;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),i=function(t,e){return!e||"object"!==I(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}(this,z(e).call(this));var r=t;return r&&"function"!=typeof r?r=t[o].bind(t):n=o,i.domSpan=document.createElement("span"),i.domSpan.className="shortcut",i.domSpan.innerHTML=n||"",i.setCallback(r),i}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&W(t,e)}(e,ut),function(t,e,o){e&&U(t.prototype,e)}(e,[{key:"_setDomContainer",value:function(t){this.domContainer=t,t.addEventListener("click",this._onClick.bind(this))}},{key:"_onClick",value:function(){this.callback&&this.callback()}}]),e}(),wt=function(t){function e(){var t;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),(t=function(t,e){return!e||"object"!==N(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}(this,F(e).call(this))).domUl=document.createElement("ul"),t}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&Y(t,e)}(e,yt),function(t,e,o){e&&G(t.prototype,e)}(e,[{key:"addButton",value:function(t,e,o,n){var i=new _t(e,o,n),r=this._addLine(t);return r.appendChild(i.domSpan),i._setDomContainer(r),i}},{key:"addSlider",value:function(t,o,n,i,r,a){var u=K(F(e.prototype),"addSlider",this).call(this,t,o,n,i,r,a);return u.domInputText.style.width="18%",u.domSlider.style.width=t?"44%":"80%",u}}]),e}(),kt={refRules:{}},Ct=function(t,e,o){var n=function(){if(at)return at;for(var t=document.styleSheets,e=0,o=t.length;e<o;++e){var n=t[e].href;if(n&&-1!==n.indexOf("yagui.css"))return at=t[e]}}();if(n){var i=n.cssRules||n.rules,r=kt.refRules[t];if(!r){var a=0,u=i.length;for(a=0;a<u&&i[a].selectorText!==t;++a);if(a===u)return!1;r=kt.refRules[t]=i[a]}r&&(r.style[e]=o)}};kt.changeWidgetsColor=function(t){var e=dt.getStrColor(t);Ct(".gui-button","background",e),Ct(".gui-select","background",e),Ct(".gui-slider > div","background",e),kt._curWidgetColor=t},kt.changeDisplayBoorder=function(t){var e=t?"1px solid #000":"0";Ct(".gui-button","border",e),Ct(".gui-select","border",e),Ct(".gui-slider","border",e),Ct(".gui-input-number","border",e),Ct(".gui-sidebar > ul > label","borderTop",e),Ct(".gui-sidebar > ul > label","borderBottom",e),Ct(".gui-sidebar","borderLeft",e),Ct(".gui-sidebar","borderRight",e),Ct(".gui-topbar","borderBottom",e),kt._curShowBorder=t},kt.changeBackgroundColor=function(t){Ct(".gui-sidebar","background",dt.getStrColor(t));var e=dt.getStrColor(dt.getColorMult(t,.5));Ct(".gui-topbar","background",e),Ct(".gui-topbar ul > li > ul","background",e),kt._curBackgroundColor=t},kt.changeTextColor=function(t){var e=dt.getStrColor(t);Ct("*","color",e),Ct(".gui-sidebar > ul > label","color",e),kt._curTextColor=t},kt.changeOverallColor=function(t){kt.changeWidgetsColor(t);var e=dt.getColorMult(t,.5);e.length=3,kt.changeBackgroundColor(e);for(var o=dt.getColorAdd(t,.5),n=0;n<3;++n)o[n]=Math.min(.8,o[n]);kt.changeTextColor(o),kt._curWidgetColor=t,kt._curBackgroundColor=e,kt._curTextColor=o},kt._curTextColor=[.73,.73,.73,1],kt._curWidgetColor=[.17,.01,.34,1],kt._curShowBorder=!1;var St=kt,Ot=function(t){function e(t,o,n){var i;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),i=function(t,e){return!e||"object"!==X(e)&&"function"!=typeof e?Q(t):e}(this,J(e).call(this));var r=n?o[n].bind(o):o;return i.domButton=document.createElement("button"),i.domButton.className="gui-undobutton",i.domButton.innerHTML="",i.domButton.addEventListener("click",i._onClick.bind(Q(i))),i.setCallback(r),i}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&q(t,e)}(e,ut),function(t,e,o){e&&Z(t.prototype,e)}(e,[{key:"setEnable",value:function(t){this.domButton.disabled=void 0!==t&&!t}},{key:"_onClick",value:function(){this.callback&&this.callback()}}]),e}(),Tt=function(t){function e(t,o,n){var i;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),i=function(t,e){return!e||"object"!==$(e)&&"function"!=typeof e?ot(t):e}(this,et(e).call(this));var r=n?o[n].bind(o):o;return i.domButton=document.createElement("button"),i.domButton.className="gui-redobutton",i.domButton.innerHTML="",i.domButton.addEventListener("click",i._onClick.bind(ot(i))),i.setCallback(r),i}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&nt(t,e)}(e,ut),function(t,e,o){e&&tt(t.prototype,e)}(e,[{key:"setEnable",value:function(t){this.domButton.disabled=void 0!==t&&!t}},{key:"_onClick",value:function(){this.callback&&this.callback()}}]),e}(),xt=function(){function t(e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.domTopbar=document.createElement("div"),this.domTopbar.className="gui-topbar",this.domUl=document.createElement("ul"),this.domTopbar.appendChild(this.domUl),this.callbackResize=e,this.uiExtra={}}return function(t,e,o){e&&it(t.prototype,e)}(t,[{key:"_addLine",value:function(t){var e=document.createElement("li");return e.innerHTML=t||"",this.domUl.appendChild(e),e}},{key:"_updateViewportPosition",value:function(t){var e=this.domTopbar.hidden?0:this.domTopbar.offsetHeight;t.style.top=e+"px",t.style.height=t.clientHeight-e+"px"}},{key:"_onChangeColor",value:function(t,e){t(e),this.uiExtra.overallColor.setValue(St._curWidgetColor,!0),this.uiExtra.widgetColor.setValue(St._curWidgetColor,!0),this.uiExtra.backColor.setValue(St._curBackgroundColor,!0),this.uiExtra.textColor.setValue(St._curTextColor,!0)}},{key:"addMenu",value:function(t){var e=new wt,o=document.createElement("li");return o.setAttribute("onclick","void(0)"),o.innerHTML=t||"",this.domUl.appendChild(o),o.appendChild(e.domUl),e._setDomContainer(o),e}},{key:"addUndoButton",value:function(t,e,o){var n=new Ot(t,e,o),i=this._addLine();return i.appendChild(n.domButton),n._setDomContainer(i),n}},{key:"addRedoButton",value:function(t,e,o){var n=new Tt(t,e,o),i=this._addLine();return i.appendChild(n.domButton),n._setDomContainer(i),n}},{key:"addExtra",value:function(){var t=this._onChangeColor,e=this.addMenu("Extra UI"),o=this.uiExtra;return e.addTitle("Overall"),o.overallColor=e.addColor("",St._curWidgetColor,t.bind(this,St.changeOverallColor)),e.addTitle("Advanced"),o.widgetColor=e.addColor("Widget",St._curWidgetColor,t.bind(this,St.changeWidgetsColor)),o.backColor=e.addColor("Back",St._curBackgroundColor,t.bind(this,St.changeBackgroundColor)),o.textColor=e.addColor("Text",St._curTextColor,t.bind(this,St.changeTextColor)),o.showBorder=e.addCheckbox("Border",St._curShowBorder,St.changeDisplayBoorder),e}},{key:"setVisibility",value:function(t){this.domTopbar.hidden=!t,this.callbackResize()}}]),t}(),Et=function(){function t(e,o,n){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),console.log("YAGUI_POTATO",n),n?(console.log("YAGUI_POTATO_2"),this.domMain=n.createElement("div")):(console.log("YAGUI_POTATO_1"),this.domMain=document.createElement("div")),this.viewport=e,this.callbackResize=o,this.viewport&&(this.viewport.style.width=document.documentElement.clientWidth+"px",this.viewport.style.height=document.documentElement.clientHeight+"px"),this.cbResize_=this._onWindowResize.bind(this),document.body.appendChild(this.domMain),this.leftSidebar=void 0,this.rightSidebar=void 0,this.topbar=void 0,window.addEventListener("resize",this._onWindowResize.bind(this),!1)}return function(t,e,o){e&&rt(t.prototype,e)}(t,[{key:"_onWindowResize",value:function(){this.viewport&&(this.viewport.style.width=document.documentElement.clientWidth+"px",this.viewport.style.height=document.documentElement.clientHeight+"px",this.viewport.style.left="0px",this.viewport.style.top="0px",this.leftSidebar&&this.leftSidebar._updateViewportPosition(this.viewport),this.rightSidebar&&this.rightSidebar._updateViewportPosition(this.viewport),this.topbar&&this.topbar._updateViewportPosition(this.viewport)),this._updateSidebarsPosition(),this.callbackResize&&this.callbackResize()}},{key:"_updateSidebarsPosition",value:function(){if(this.topbar){var t=this.topbar.domTopbar.offsetHeight;this.leftSidebar&&this.leftSidebar._setTop(t),this.rightSidebar&&this.rightSidebar._setTop(t)}}},{key:"addLeftSidebar",value:function(){console.log("YAGUI_POTATO_MAIN_DOM_LEFT",this.domMain),this.leftSidebar=new gt(this.cbResize_);var t=this.leftSidebar.domSidebar;return this.domMain.appendChild(t),this.domMain.appendChild(this.leftSidebar.domResize),this._updateSidebarsPosition(),this.leftSidebar._updateViewportPosition(this.viewport),this.leftSidebar}},{key:"addRightSidebar",value:function(){this.rightSidebar=new gt(this.cbResize_);var t=this.rightSidebar.domSidebar;return this.domMain.appendChild(t),this.domMain.appendChild(this.rightSidebar.domResize),this.rightSidebar._onTheRight(),this._updateSidebarsPosition(),this.rightSidebar._updateViewportPosition(this.viewport),this.rightSidebar}},{key:"addTopbar",value:function(){return console.log("YAGUI_POTATO_MAIN_DOM_TOP",this.domMain),this.topbar=new xt(this.cbResize_),this.domMain.appendChild(this.topbar.domTopbar),this._updateSidebarsPosition(),this.topbar._updateViewportPosition(this.viewport),this.topbar}},{key:"setVisibility",value:function(t){this.domMain.hidden=!t,this._onWindowResize()}}]),t}();e.default=Et}])}));